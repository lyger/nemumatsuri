{"version":3,"sources":["util.js","colorscheme.js","parts/matsuri/shoulders.js","parts/background/scenes/stripes.js","parts/background/scenes/dots.js","parts/background/scenes/solid.js","parts/background/scenes/circles.js","parts/background/elements/dangle.js","parts/background/elements/burst.js","parts/background/elements/shapes.js","parts/background/scenes/nightsky.js","parts/background/elements/flutter.js","parts/background/scenes/heartscatter.js","parts/background/elements/castle.js","parts/background/elements/envelope.js","parts/background/scenes/letters.js","parts/background/elements/milestone.js","scene.js","parts/matsuri/head.js","parts/matsuri/body.js","parts/matsuri/arms.js","parts/matsuri/leg.js","parts/matsuri.js","parts/ebifrion/upper.js","parts/ebifrion/lower.js","parts/ebifrion.js","parts/character.js","parts/background.js","menu/ui.js","menu/bgm.js","menu.js","Main.js","serviceWorker.js","index.js"],"names":["isObject","value","undefined","constructor","Object","useLocalStorageReducer","key","reducer","initialState","localInitialState","JSON","parse","localStorage","getItem","equalKeys","a","b","aKeys","keys","sort","bKeys","stringify","reduce","acc","aIsObj","bIsObj","Error","error","setItem","useReducer","state","action","newState","backgroundColors","BACKGROUND","BACK_FG","BACK_BG","BACK_HL","dressingColors","STAR","MOONSHADOW","STRING","HEART1","HEART2","HEART3","objectColors","CASTLE","ENVELOPE_FLAP","ENVELOPE_BODY","PAPER","PAPER_GB","specialColors","CAKE_SPONGE","CAKE_ICING","CAKE_STRAWBERRY","matsuriColors","EYES","SKIN","SKIN_SHADOW","HAIR","HAIR_SHADOW","YELLOW","YELLOW_SHADOW","BLACK","ebifrionColors","MANE","MANE_SHADOW","BODY","BODY_SHADOW","TAIL","TAIL_SHADOW","MOUTH","FEATURES","BLUSH","Reducer","type","group","color","ColorContext","createContext","ColorScheme","props","dispatch","Provider","children","Shoulders","rate","useContext","variants","shoulders","y","transition","ease","duration","loop","Infinity","repeatDelay","path","id","d","animate","style","fill","href","clipPath","Stripes","n","stripeWidth","xCoords","x","push","childVariants","hide","pathLength","show","g","initial","staggerChildren","delayChildren","exit","map","i","strokeDasharray","stroke","strokeWidth","PrivateDots","spacing","r","nCols","Math","ceil","nRows","offsetX","offsetY","scale","baseTransition","stiffness","damping","mass","circles","odd","j","circle","delay","random","Dots","rFg","spacingBg","rBg","Solid","floor","centerWidth","centerHeight","coords","staggerDirection","c","rect","width","height","originX","originY","fillOpacity","Circles","rings","cx","cy","bright","f","Dangle","swing","idle","rotate","velocity","abs","Burst","period","opacity","times","Star","tilt","animated","burst","baseTilt","spin","Moon","shadow","useState","phase","setPhase","upperColor","useEffect","newMoon","Date","now","getTime","getMoonPhase","Heart","skew","pulse","filterId","toString","substr","feGaussianBlur","in","stdDeviation","transform","filter","NightSky","Flutter","span","noTransition","init","enter","flutterX","flutterY","HeartScatter","Castle","scaleY","OpenEnvelope","gProps","ClosedEnvelope","Envelope","open","Letters","variantsPaper","recolor","uncolor","values","range","arr","Layer","rx","ry","highlightColor","chroma","brighten","hex","Strawberry","TopSpinBerry","t","offset","omega","useTransform","v","PI","cos","sin","MidSpinBerry","text","textColor","scaleX","fontSize","fontFamily","Milestone","useMotionValue","seed","x2y","bottom","charAt","BACKDROPS","icon","className","element","colors","DRESSINGS","marginLeft","marginRight","OBJECTS","SPECIALS","showBackground","showCharacter","backdropIndex","dressingIndex","objectIndex","specialIndex","bob","bgmURL","SceneContext","Scene","SideTail","sideTailSwing","sideTail","Head","rerenderKey","headSwing","breathRate","sway","ahogeVariants","largeFlick","smallFlick","ahogeControl","useAnimation","ahogeLoop","start","then","faceControl","Fragment","squashX","squashY","onClick","onMouseOver","Body","bellyControl","LeftArm","armSwing","arm","RightArm","Leg","legSwing","leg","Matsuri","Upper","mouthControl","Lower","tailVariants","tailControls","tailLoop","legVariants","legSwingSpan","topFront","topBack","Ebifrion","Character","translateY","Background","shownElements","LabeledRow","slice","child","ColorSelector","selection","onSelect","isSelected","backgroundColor","e","stopPropagation","ShowButtons","list","toggleBackground","toggleCharacter","fn","handlers","handler","target","tagName","toLowerCase","isComposing","keyCode","code","preventDefault","document","addEventListener","forEach","removeEventListener","ScenerySelector","options","index","colorSelection","onScenerySelect","onColorSelect","Slider","min","max","step","onChange","BGMFooter","collapsed","player","setPlayer","isPlaying","setIsPlaying","videoId","url","URL","host","pathname","search","test","length","substring","split","q","getYouTubeVideoId","placeholder","pauseVideo","playVideo","disabled","containerClassName","opts","playerVars","autoplay","fs","disablekb","modestbranding","onReady","setVolume","onStateChange","getPlayerState","onEnd","Menu","scene","sceneDispatch","colorDispatch","setCollapsed","setSelection","toggleCollapse","div","disableAlpha","parseFloat","margin","whileHover","rel","Main","viewBox","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.64e9bebd.chunk.js","sourcesContent":["import { useEffect, useReducer } from 'react';\r\n\r\n\r\nfunction isObject (value) {\r\n  return value !== undefined && value !== null && typeof value === 'object' && value.constructor === Object;\r\n}\r\n\r\n\r\nfunction equalKeys(a, b) {\r\n  const aKeys = Object.keys(a).sort();\r\n  const bKeys = Object.keys(b).sort();\r\n  if (JSON.stringify(aKeys) !== JSON.stringify(bKeys))  return false;\r\n  return aKeys.reduce((acc, key) => {\r\n    const aIsObj = isObject(a[key]);\r\n    const bIsObj = isObject(b[key]);\r\n    if (aIsObj !== bIsObj) return false;\r\n    if (aIsObj && bIsObj) return acc && equalKeys(a[key], b[key]);\r\n    return acc;\r\n  }, true);\r\n}\r\n\r\n\r\nexport function useShortcuts(list) {\r\n  useEffect(() => {\r\n    const handlers = list.map(({ key, fn }) => {\r\n      function handler(e) {\r\n        switch (e.target.tagName.toLowerCase()) {\r\n          case 'input':\r\n          case 'textarea':\r\n            return;\r\n          default:\r\n            if (e.isComposing || e.keyCode === 229) return;\r\n            if (e.code === key) {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              fn();\r\n            }\r\n        }\r\n      }\r\n      document.addEventListener('keydown', handler);\r\n      return handler;\r\n    });\r\n\r\n    function cleanUp() {\r\n      handlers.forEach((handler) => {\r\n        document.removeEventListener('keydown', handler);\r\n      });\r\n    }\r\n\r\n    return cleanUp;\r\n  }, [list]);\r\n}\r\n\r\n\r\nexport function useLocalStorageReducer(key, reducer, initialState) {\r\n  let localInitialState;\r\n  try {\r\n    localInitialState = JSON.parse(localStorage.getItem(key));\r\n    if (localInitialState === null || !equalKeys(localInitialState, initialState)) throw new Error();\r\n  } catch (error) {\r\n    localInitialState = initialState;\r\n    localStorage.setItem(key, JSON.stringify(initialState));\r\n  }\r\n  const localReducer = (state, action) => {\r\n    const newState = reducer(state, action);\r\n    localStorage.setItem(key, JSON.stringify(newState));\r\n    return newState;\r\n  }\r\n  return useReducer(localReducer, localInitialState);\r\n}\r\n","import React, { createContext } from 'react';\r\nimport { useLocalStorageReducer } from './util';\r\n\r\n\r\nconst initialState = {\r\n  backgroundColors: {\r\n    BACKGROUND: '#cfeeff',\r\n    BACK_FG: '#acd2ff',\r\n    BACK_BG: '#cfeeff',\r\n    BACK_HL: '#fff',\r\n  },\r\n  dressingColors: {\r\n    STAR: '#ffff7d',\r\n    MOONSHADOW :'#9eaaff',\r\n    STRING: '#6D7196',\r\n    HEART1: '#ff8e8f',\r\n    HEART2: '#ffdef4',\r\n    HEART3: '#fbfbeb',\r\n  },\r\n  objectColors: {\r\n    CASTLE:'#5e74b9',\r\n    ENVELOPE_FLAP: '#d7d7ff',\r\n    ENVELOPE_BODY: '#a9a9ff',\r\n    PAPER: '#fffff5',\r\n    PAPER_GB: '#fffff5',\r\n  },\r\n  specialColors : {\r\n    CAKE_SPONGE: '#ffedc4',\r\n    CAKE_ICING: '#f7f7ef',\r\n    CAKE_STRAWBERRY: '#ff8ea1',\r\n  },\r\n  matsuriColors: {\r\n    EYES: '#7f6851',\r\n    SKIN: '#fff0d5',\r\n    SKIN_SHADOW: '#ffcca5',\r\n    HAIR: '#aa8a61',\r\n    HAIR_SHADOW: '#936c51',\r\n    YELLOW: '#fffaa8',\r\n    YELLOW_SHADOW: '#f0de85',\r\n    BLACK: '#695f5c',\r\n  },\r\n  ebifrionColors: {\r\n    MANE: '#cf9c69',\r\n    MANE_SHADOW: '#cf8b58',\r\n    BODY: '#ffce7d',\r\n    BODY_SHADOW: '#ecb367',\r\n    SKIN: '#ffe5af',\r\n    SKIN_SHADOW: '#ffcca5',\r\n    TAIL: '#ffa98f',\r\n    TAIL_SHADOW: '#fa909b',\r\n    MOUTH: '#fff8e9',\r\n    FEATURES: '#7f6851',\r\n    BLUSH: '#ff9498',\r\n  },\r\n};\r\n\r\nfunction Reducer(state, { type, value }) {\r\n  switch (type) {\r\n    case 'CHANGE_COLOR':\r\n      const { group, key, color } = value;\r\n      const newState = {...state};\r\n      newState[group] = {...state[group]}\r\n      newState[group][key] = color;\r\n      return newState;\r\n    case 'RESET':\r\n      return initialState;\r\n    default:\r\n      return {...state};\r\n  }\r\n}\r\n\r\nexport const ColorContext = createContext(initialState);\r\nexport default function ColorScheme(props) {\r\n  const [state, dispatch] = useLocalStorageReducer('colorScheme', Reducer, initialState);\r\n  return (\r\n    <ColorContext.Provider value={[state, dispatch]}>\r\n      {props.children}\r\n    </ColorContext.Provider>\r\n  );\r\n}","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\n\r\nexport default function Shoulders({ rate }) {\r\n  const breathSpan = 2.5;\r\n  const [ { matsuriColors } ] = useContext(ColorContext);\r\n  const variants = {\r\n    shoulders: {y: [breathSpan, -breathSpan, breathSpan], transition: {ease: 'easeInOut', duration: rate * 0.7, loop: Infinity, repeatDelay: rate * 0.3}},\r\n  };\r\n  return (\r\n    <g>\r\n\r\n      <defs>\r\n\r\n        <motion.path\r\n          id=\"skin_shoulders\"\r\n          d=\"m 954,428.625 c 0,0 14.62499,0.375 27.74999,2.625 13.125,2.25 22.50001,7.87499 26.62501,15.75 4.125,7.87499 5.3598,5.02119 5.3598,22.64617 -73.79321,41.03107 -127.98629,48.6469 -180.81562,2.88465 -0.52257,-17.38191 2.90282,-23.75497 11.26463,-30.67003 24.90114,-20.59282 109.81604,-13.23578 109.81604,-13.23578 h 1.4e-4\"\r\n          variants={variants}\r\n          animate={['shoulders', `${rate}`]}\r\n          style={{fill: matsuriColors.SKIN}} />\r\n\r\n        <clipPath id=\"skin_shoulders_clip\">\r\n          <use href=\"#skin_shoulders\" />\r\n        </clipPath>\r\n\r\n      </defs>\r\n\r\n      <use href=\"#skin_shoulders\" />\r\n      <path\r\n        id=\"skin_shoulders_shadow\"\r\n        clipPath=\"url(#skin_shoulders_clip)\"\r\n        d=\"m 834.36452,423.35484 c -10.56566,26.5578 34.86535,83.56697 74.10977,80.65015 39.24442,-2.91682 55.67488,-61.7004 59.26277,-84.48953 -25.17727,-2.80429 -40.00929,-6.13179 -63.1626,-6.07652 -19.6753,0.35634 -58.24247,1.30703 -70.20995,9.9159 0,0 0,0 0,0\"\r\n        style={{fill: matsuriColors.SKIN_SHADOW}} />\r\n\r\n    </g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\nexport default function Stripes({ n }) {\r\n  const [ { backgroundColors } ] = useContext(ColorContext);\r\n  const stripeWidth = 1920 / (2 * n + 1);\r\n  const xCoords = [];\r\n  for (let x = 0; x < 2 * n + 1; x++) {\r\n    xCoords.push((x + 0.5) * stripeWidth);\r\n  }\r\n  const parentVariants = {\r\n    hide: {transition: {staggerChildren: 0.05, delayChildren: 1}},\r\n    show: {transition: {staggerChildren: 0.05}},\r\n  };\r\n  const childVariants = {\r\n    hide: { pathLength: 0, transition: { ease: 'easeOut', duration: 0.5} },\r\n    show: { pathLength: 1, transition: { ease: 'easeOut', duration: 0.5} },\r\n  };\r\n  return (\r\n    <motion.g\r\n      initial=\"hide\"\r\n      animate=\"show\"\r\n      variants={parentVariants}\r\n      exit=\"hide\">\r\n      {xCoords.map((x, i) =>\r\n        (i % 2 === 0)\r\n        ? <motion.path\r\n            key={i}\r\n            d={`M${x},1080 L${x},0`}\r\n            variants={childVariants}\r\n            strokeDasharray=\"0 1\"\r\n            style={{stroke: backgroundColors.BACK_BG, strokeWidth: stripeWidth}} />\r\n        : <motion.path\r\n            key={i}\r\n            d={`M${x},0 L${x},1080`}\r\n            variants={childVariants}\r\n            strokeDasharray=\"0 1\"\r\n            style={{stroke: backgroundColors.BACK_FG, strokeWidth: stripeWidth}} />)}\r\n    </motion.g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nfunction PrivateDots({ spacing, r, color }) {\r\n  const nCols = Math.ceil((1920 + 2 * r) / spacing) - 1;\r\n  const nRows = Math.ceil((1080 + 2 * r) / spacing) - 1;\r\n  const offsetX = ((nCols + 1) * spacing - 1920) / 2;\r\n  const offsetY = ((nRows + 1) * spacing - 1080) / 2;\r\n  const variants = {\r\n    hide: {scale: 0},\r\n    show: {scale: 1},\r\n  };\r\n  const baseTransition = {type: 'spring', stiffness: 100, damping: 5, mass: 0.5};\r\n  const circles = [];\r\n  for (let i = 0; i < nCols; i++) {\r\n    const x = (i + 1) * spacing - offsetX;\r\n    const odd = (i % 2 === 1);\r\n    for (let j = 0; j < (odd ? nRows : nRows + 1); j++) {\r\n      const y = odd ? (j + 1) * spacing - offsetY : (j + 0.5) * spacing - offsetY;\r\n      circles.push(\r\n        <motion.circle\r\n          key={`${i}:${j}`}\r\n          style={{x, y, r, fill: color}}\r\n          variants={variants}\r\n          transition={{...baseTransition, delay: Math.random()}} />);\r\n    }\r\n  }\r\n  return (\r\n    <motion.g\r\n      initial=\"hide\"\r\n      animate=\"show\"\r\n      variants={['hide', 'show']}\r\n      exit=\"hide\">\r\n      {circles}\r\n    </motion.g>\r\n  )\r\n}\r\n\r\n\r\nexport default function Dots({ spacing }) {\r\n  const [ { backgroundColors } ] = useContext(ColorContext);\r\n  const rFg = 0.25 * spacing;\r\n  const spacingBg = 1.8 * spacing;\r\n  const rBg = 0.67 * spacingBg;\r\n  return [\r\n    <PrivateDots key=\"bottom\" spacing={spacingBg} r={rBg} color={backgroundColors.BACK_BG} />,\r\n    <PrivateDots key=\"top\" spacing={spacing} r={rFg} color={backgroundColors.BACK_FG} />,\r\n  ];\r\n}","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nexport default function Solid({ n }) {\r\n  const [ { backgroundColors } ] = useContext(ColorContext);\r\n  const strokeWidth = Math.floor(540 / n);\r\n  const centerWidth = 1920 - (2 * strokeWidth * n) + 2;\r\n  const centerHeight = 1080 - (2 * strokeWidth * n) + 2;\r\n  const parentVariants = {\r\n    hide: {transition: {staggerChildren: 0.1, staggerDirection: -1, delayChildren: 1}},\r\n    show: {transition: {staggerChildren: 0.1}},\r\n  };\r\n  const childVariants = {\r\n    hide: {scale: 0, transition: {ease: 'easeOut', duration: 1}},\r\n    show: {scale: 1, transition: {ease: 'easeOut', duration: 1}},\r\n  };\r\n  const coords = [];\r\n  for (let i = 0; i < n; i++) coords.push((i + 0.5) * strokeWidth);\r\n  return (\r\n    <motion.g\r\n      variants={parentVariants}\r\n      initial=\"hide\"\r\n      animate=\"show\"\r\n      exit=\"hide\"\r\n      style={{scale: 1}}>\r\n      {coords.map((c, i) => \r\n        <motion.rect\r\n          key={i}\r\n          x={c} y={c}\r\n          width={1920 - 2 * c} height={1080 - 2 * c}\r\n          variants={childVariants}\r\n          style={{originX: '960px', originY: '540px', stroke: backgroundColors.BACK_BG, strokeWidth: strokeWidth + 2, fillOpacity: 0}} />)}\r\n        <motion.rect\r\n          key=\"center\"\r\n          x={n * strokeWidth - 1} y={n * strokeWidth - 1}\r\n          width={centerWidth} height={centerHeight}\r\n          variants={childVariants}\r\n          style={{originX: '960px', originY: '540px', fill: backgroundColors.BACK_BG}} />\r\n    </motion.g>\r\n  );\r\n}","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\nexport default function Circles() {\r\n  const [ { backgroundColors } ] = useContext(ColorContext);\r\n  const parentVariants = {\r\n    hide: {transition: {staggerChildren: 0.1, staggerDirection: -1, delayChildren: 0.5}},\r\n    show: {transition: {staggerChildren: 0.2}},\r\n  };\r\n  const childVariants = {\r\n    hide: {r: 0.1, transition: {ease: 'easeOut', duration: 0.75}},\r\n    show: {r: 1105, transition: {ease: 'easeOut', duration: 0.75}},\r\n  };\r\n  const rings = [\r\n    <motion.circle key=\"circIntro1\" cx={960} cy={540} variants={childVariants} style={{fill: backgroundColors.BACK_FG}} />,\r\n    <motion.circle key=\"circIntro2\" cx={960} cy={540} variants={childVariants} style={{fill: backgroundColors.BACK_BG}} />,\r\n    <motion.circle key=\"circIntro3\" cx={960} cy={540} variants={childVariants} style={{fill: backgroundColors.BACK_HL}} />,\r\n    <motion.circle key=\"circIntro4\" cx={960} cy={540} variants={childVariants} style={{fill: backgroundColors.BACK_BG}} />,\r\n    <motion.circle key=\"circIntro5\" cx={960} cy={540} variants={childVariants} style={{fill: backgroundColors.BACK_FG}} />,\r\n    <motion.circle key=\"circIntro6\" cx={960} cy={540} variants={childVariants} style={{fill: backgroundColors.BACK_BG}} />,\r\n  ];\r\n  let bright = false;\r\n  for (let f = 1.0; f > 0; f -= 0.125) {\r\n    rings.push(\r\n      <motion.circle key={`circShow${f}`} cx={960} cy={540} variants={{...childVariants, show: {...childVariants.show, r: 1105 * f}}} style={{fill: bright ? backgroundColors.BACK_BG : backgroundColors.BACK_FG}} />\r\n    );\r\n    bright = !bright;\r\n  }\r\n  return (\r\n    <motion.g variants={parentVariants} initial=\"hide\" animate=\"show\" exit=\"hide\">\r\n      {rings}\r\n    </motion.g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nexport default function Dangle({ x, y, swing, children }) {\r\n  const [ { dressingColors } ] = useContext(ColorContext);\r\n  const variants = {\r\n    hide: {\r\n      y: y - 1080,\r\n      transition: { type: 'spring', stiffness: 50, damping: 5, mass: 0.8, delay: 0.75 + swing / 20 },\r\n    },\r\n    show: {\r\n      y: y,\r\n      transition: { type: 'spring', stiffness: 50, damping: 5, mass: 0.8, delay: 0.75 + swing / 20 },\r\n    },\r\n    idle: {\r\n      rotate: 0,\r\n      transition: {type: 'spring', stiffness: 10, damping: 0, velocity: swing * 0.1, mass: 15 - 0.5 * Math.abs(swing)},\r\n    },\r\n  }\r\n  return (\r\n    <motion.g\r\n      initial=\"hide\"\r\n      style={{x, originX: '0px', originY: '-1080px'}}\r\n      variants={variants}\r\n      animate={[\"show\", \"idle\"]}\r\n      exit=\"hide\">\r\n      <path d=\"M0,-2000 L0,0\" style={{stroke: dressingColors.STRING, strokeWidth: 4}} />\r\n      {children}\r\n    </motion.g>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nexport default function Burst({ color, r, period }) {\r\n  return (\r\n    <motion.circle\r\n      animate={{r: [0, 0, r * 0.8, r], opacity: [1, 1, 1, 0]}}\r\n      transition={{ease: 'easeInOut', duration: period, times: [0, 0.9, 0.95, 1], loop: Infinity}}\r\n      style={{fillOpacity: 0, stroke: color, strokeWidth: 0.05 * r}} />\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport Burst from './burst';\r\n\r\n\r\nexport function Star({ color, tilt, scale, animated, burst }) {\r\n  const baseTilt = tilt || 0;\r\n  const variants = {\r\n    spin: {\r\n      rotate: baseTilt,\r\n      transition: {type: 'spring', stiffness: 20, damping: 0, velocity: 0.5 * tilt, mass: 20 * scale}\r\n    }\r\n  }\r\n  return (\r\n    <motion.g\r\n      variants={animated ? variants: null}\r\n      animate={animated ? 'spin': null}\r\n      style={animated ? {scale} : {scale, rotate: baseTilt}}>\r\n      {burst && <Burst r={150} color={color} period={10 * scale - 0.2 * tilt} />}\r\n      <motion.path\r\n        d=\"M 63.10928,82.449142 C 58.212811,86.319999 9.7354957,63.68882 3.4989358,63.942337 -2.7376235,64.195854 -49.218101,90.687081 -54.412597,87.226423 c -5.194496,-3.460659 1.34872,-56.558744 -0.819592,-62.411724 -2.168312,-5.852979 -41.726224,-41.872301 -40.04013,-47.881962 1.686094,-6.009662 54.20734,-16.194904 59.103809,-20.065762 4.896469,-3.870857 26.9288124,-52.623249 33.1653717,-52.876766 6.2365599,-0.253517 32.1532583,46.549743 37.3477543,50.010401 5.194497,3.460658 58.369146,9.349344 60.537457,15.202323 2.168312,5.85298 -34.335533,44.964228 -36.021627,50.97389 -1.686094,6.009661 9.145303,58.401462 4.248834,62.272319 z\"\r\n        style={{fill: color}} />\r\n    </motion.g>\r\n  );\r\n}\r\n\r\n\r\nfunction getMoonPhase() {\r\n  const newMoon = new Date('2020-03-24T18:28:00+09:00');\r\n  const now = Date.now();\r\n  return ((now - newMoon.getTime()) / 2551442878) % 1;\r\n}\r\n\r\n\r\nexport function Moon({ color, shadow, tilt, r }) {\r\n  const [phase, setPhase] = useState(0);\r\n  const upperColor = (phase + 0.25) % 1 < 0.5 ? shadow : color;\r\n  useEffect(() => { setPhase(getMoonPhase()); }, []);\r\n  return (\r\n    <motion.g style={{rotate: tilt}}>\r\n      <circle r={r} cx={0} cy={0} style={{fill: color}} />\r\n      <path\r\n        d={`M0,${-r} a1,1 0 0,${phase < 0.5 ? 0 : 1} 0,${2 * r}`}\r\n        style={{fill: shadow}} />\r\n      <path\r\n        d={`M0,${-r} a${Math.abs(0.25 - (phase % 0.5)) * 4},1 0 0,${(phase % 0.5) < 0.25 ? 1 : 0} 0,${2 * r}`}\r\n        style={{fill: upperColor}} />\r\n      <path d={`M0,${-r} L0,${r}`} style={{stroke: upperColor, strokeWidth: 2}} />\r\n    </motion.g>\r\n  );\r\n}\r\n\r\n\r\nexport function Heart({ color, scale, tilt, skew, pulse }) {\r\n  const filterId = 'heartFilter' + Math.random().toString(36).substr(2, 9);\r\n  return (\r\n    <g>\r\n      <filter id={filterId}>\r\n        <motion.feGaussianBlur\r\n          in=\"SourceGraphic\"\r\n          animate={{stdDeviation: [0, 0.75 * pulse, 0]}}\r\n          transition={{ease: 'easeInOut', duration: 0.3 * pulse, delay: Math.random() * pulse, repeatDelay: 0.7 * pulse, loop: Infinity}} />\r\n      </filter>\r\n      <path\r\n        d=\"m 0,-25 a 21.213203,21.213203 0 0 0 -30,30 l 27,27 a 4.42426,4.2426 0 0 0 6,0 l 27,-27 a 21.213203,21.213203 0 0 0 -30,-30\"\r\n        style={{fill: color, transform: `rotate(${tilt || 0}deg) skewX(${skew || 0}deg) scale(${scale || 1})`}}\r\n        filter={`url(#${filterId})`} />\r\n    </g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport Dangle from '../elements/dangle';\r\nimport { Star, Moon } from '../elements/shapes';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\nexport default function NightSky() {\r\n  const [ { dressingColors } ] = useContext(ColorContext)\r\n  return (\r\n    [\r\n      <Dangle key=\"0\" x={146} y={900} swing={-4}><Star color={dressingColors.STAR} tilt={6} scale={0.6} animated burst /></Dangle>,\r\n      <Dangle key=\"1\" x={580} y={700} swing={-10}><Star color={dressingColors.STAR} tilt={5} scale={0.6} animated burst /></Dangle>,\r\n      <Dangle key=\"2\" x={500} y={331} swing={-3}><Star color={dressingColors.STAR} tilt={14} scale={0.7} animated burst /></Dangle>,\r\n      <Dangle key=\"3\" x={820} y={950} swing={-7}><Star color={dressingColors.STAR} tilt={3} scale={0.8} animated burst /></Dangle>,\r\n      <Dangle key=\"4\" x={1054} y={223} swing={-7}><Star color={dressingColors.STAR} tilt={5} scale={1} animated burst /></Dangle>,\r\n      <Dangle key=\"5\" x={1222} y={780} swing={-4}><Star color={dressingColors.STAR} tilt={-11} scale={0.5} animated burst /></Dangle>,\r\n      <Dangle key=\"6\" x={1320} y={666} swing={1}><Star color={dressingColors.STAR} tilt={-4} scale={0.4} animated burst /></Dangle>,\r\n      <Dangle key=\"7\" x={1512} y={150} swing={9}><Star color={dressingColors.STAR} tilt={7} scale={0.9} animated burst /></Dangle>,\r\n      <Dangle key=\"8\" x={1819} y={324} swing={7}><Star color={dressingColors.STAR} tilt={10} scale={0.6} animated burst /></Dangle>,\r\n      <Dangle key=\"9\" x={1639} y={498} swing={6}><Star color={dressingColors.STAR} tilt={-10} scale={0.6} animated burst /></Dangle>,\r\n      <Dangle key=\"moon\" x={250} y={400} swing={-5}><Moon color={dressingColors.STAR} shadow={dressingColors.MOONSHADOW} tilt={-20} r={140} /></Dangle>,\r\n    ]\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\n\r\nexport default function Flutter({ x, y, span, noTransition, children }) {\r\n  const variants = {\r\n    init: {scale: noTransition ? 1 : 0},\r\n    enter: {scale: 1, transition: {type: 'spring', stiffness: 100, damping: 5, mass: 0.5, delay: 0.5 + 0.01 * span}},\r\n    flutterX: {x: [x - span, x + span, x - span], transition: {ease: 'easeInOut', loop: Infinity, duration: 0.23 * span}},\r\n    flutterY: {y: [y + span, y - span, y + span], transition: {ease: 'easeInOut', loop: Infinity, duration: 0.17 * span}},\r\n    exit: {scale: noTransition ? 1 : 0, transition: {ease: 'easeInOut', duration: 0.5, delay: 0.5 + 0.01 * span}},\r\n  };\r\n  return (\r\n    <motion.g\r\n      variants={variants}\r\n      initial=\"init\"\r\n      animate={['enter', 'flutterX', 'flutterY']}\r\n      exit=\"exit\">\r\n      {children}\r\n    </motion.g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { ColorContext } from '../../../colorscheme';\r\nimport Flutter from '../elements/flutter';\r\nimport { Heart } from '../elements/shapes';\r\n\r\n\r\nexport default function HeartScatter() {\r\n  const [ { dressingColors } ] = useContext(ColorContext);\r\n  return [\r\n    <Flutter key=\"1\" x={250} y={95} span={19.5}><Heart scale={1.2} color={dressingColors.HEART1} skew={-1} pulse={1.4} tilt={-7} /></Flutter>,\r\n    <Flutter key=\"2\" x={786} y={157} span={41.3}><Heart scale={3.0} color={dressingColors.HEART2} skew={9} pulse={4.6} tilt={19} /></Flutter>,\r\n    <Flutter key=\"3\" x={1443} y={265} span={17.6}><Heart scale={1.6} color={dressingColors.HEART1} skew={-5} pulse={2.5} tilt={-15} /></Flutter>,\r\n    <Flutter key=\"4\" x={977} y={379} span={34.0}><Heart scale={2.4} color={dressingColors.HEART2} skew={4} pulse={3.0} tilt={4} /></Flutter>,\r\n    <Flutter key=\"5\" x={521} y={283} span={28.3}><Heart scale={2.8} color={dressingColors.HEART3} skew={3} pulse={5.0} tilt={-13} /></Flutter>,\r\n    <Flutter key=\"6\" x={1364} y={480} span={15.8}><Heart scale={1.2} color={dressingColors.HEART3} skew={-9} pulse={2.3} tilt={-10} /></Flutter>,\r\n    <Flutter key=\"7\" x={218} y={494} span={22.1}><Heart scale={2.0} color={dressingColors.HEART3} skew={2} pulse={3.8} tilt={13} /></Flutter>,\r\n    <Flutter key=\"8\" x={143} y={563} span={24.4}><Heart scale={1.4} color={dressingColors.HEART1} skew={7} pulse={2.0} tilt={-15} /></Flutter>,\r\n    <Flutter key=\"9\" x={567} y={573} span={41.6}><Heart scale={4.0} color={dressingColors.HEART1} skew={-4} pulse={3.6} tilt={-16} /></Flutter>,\r\n    <Flutter key=\"10\" x={752} y={627} span={53.8}><Heart scale={1.3} color={dressingColors.HEART3} skew={-8} pulse={4.8} tilt={-5} /></Flutter>,\r\n    <Flutter key=\"11\" x={1148} y={634} span={24.1}><Heart scale={1.9} color={dressingColors.HEART3} skew={-9} pulse={2.6} tilt={-6} /></Flutter>,\r\n    <Flutter key=\"12\" x={1714} y={650} span={29.0}><Heart scale={0.9} color={dressingColors.HEART3} skew={7} pulse={2.5} tilt={6} /></Flutter>,\r\n    <Flutter key=\"13\" x={1335} y={727} span={41.2}><Heart scale={2.6} color={dressingColors.HEART1} skew={-10} pulse={2.6} tilt={14} /></Flutter>,\r\n    <Flutter key=\"14\" x={1700} y={149} span={29.1}><Heart scale={3.5} color={dressingColors.HEART2} skew={8} pulse={3.2} tilt={-11} /></Flutter>,\r\n    <Flutter key=\"15\" x={107} y={892} span={25.5}><Heart scale={1.5} color={dressingColors.HEART2} skew={0} pulse={2.8} tilt={2} /></Flutter>,\r\n    <Flutter key=\"16\" x={485} y={943} span={25.6}><Heart scale={2.2} color={dressingColors.HEART2} skew={6} pulse={3.9} tilt={-15} /></Flutter>,\r\n  ];\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nexport default function Castle() {\r\n  const [ { objectColors } ] = useContext(ColorContext);\r\n  const variants = {\r\n    hide: {\r\n      scaleY: 0.5,\r\n      y: 300,\r\n      transition: {type: 'spring', stiffness: 50, damping: 10, velocity: 4, mass: 1.5},\r\n    },\r\n    show: {\r\n      scaleY: 1,\r\n      y: 0,\r\n      transition: {type: 'spring', stiffness: 200, damping: 10, mass: 0.5, delay: 0.5},\r\n    },\r\n    exit: {\r\n      scaleY: [null, 1.1, 0.5],\r\n      y: [null, -50, 300],\r\n      transition: {ease: 'easeInOut', duration: 0.5}\r\n    },\r\n  }\r\n  return (\r\n    <motion.g\r\n      initial=\"hide\"\r\n      style={{originY: '1080px'}}\r\n      variants={variants}\r\n      animate=\"show\"\r\n      exit=\"exit\">\r\n      <path\r\n        d=\"m 1502.1617,865.55377 c 0.4426,-1.4928 2.3571,-17.6001 3.3564,-28.24005 0.7307,-7.77945 0.9242,-15.35707 0.9345,-36.5928 0.013,-26.5362 -0.332,-34.5045 -2.132,-49.24297 -0.7071,-5.78992 -0.848,-6.21363 -3.6703,-11.03426 l -2.935,-5.01314 v -8.19023 -8.19023 l 3.3145,-0.0628 c 1.8231,-0.0346 2.8765,-0.021 3.2577,0.0301 0.3812,0.0512 0.6679,-0.2207 0.9549,-0.651 0.2182,-0.32729 1.2676,-2.08032 2.6115,-3.82819 8.5301,-11.09387 16.0179,-26.63744 19.0309,-39.50555 1.2464,-5.32301 2.2943,-4.63597 4.4492,2.91682 3.9959,14.00586 10.7023,27.39524 18.5237,36.98302 1.3649,1.67305 2.4816,3.28393 2.4816,3.57973 0,0.31232 1.5565,0.53782 3.7123,0.53782 h 3.7123 v 8.3252 8.3252 l -2.671,4.69784 c -2.3001,4.04529 -3.693,8.12222 -3.693,10.80907 0,0.5931 2.6279,0.72315 14.6163,0.72315 h 14.6161 l -0.3109,-3.57972 c -0.1711,-1.96885 -0.6639,-7.47223 -1.0951,-12.22973 l -0.7841,-8.65001 -2.9145,-5.04799 -2.9145,-5.04797 v -8.17813 -8.17813 l 3.3145,-0.0629 c 1.823,-0.0346 2.6525,-0.0186 3.0463,0.0355 0.3939,0.0541 0.7435,-0.20775 0.9227,-0.52453 0.1834,-0.32415 1.2456,-2.01606 2.6875,-3.83348 8.0995,-10.20937 14.5136,-22.93927 18.3657,-36.45005 0.79,-2.77097 1.5769,-5.3961 1.7484,-5.83363 0.1717,-0.43752 0.2742,-0.97448 0.2278,-1.19324 -0.046,-0.21876 0.095,-0.39409 0.3136,-0.38963 1.0195,0.0208 1.6223,1.01329 2.2496,3.7042 1.2366,5.30368 5.3859,16.61815 8.173,22.28586 3.079,6.26128 7.2763,12.89952 11.3645,17.97355 1.5074,1.87081 2.7407,3.60101 2.7407,3.84489 0,0.24388 1.5512,0.44342 3.4471,0.44342 h 3.4472 v 8.32519 8.3252 l -2.753,4.80048 c -1.9713,3.43763 -2.8449,5.5909 -3.0773,7.5847 l -0.3244,2.78424 h 9.7065 9.7064 v -8.75207 -8.75207 l 5.8336,-10.22049 5.8337,-10.22051 v -10.07544 -10.07545 l -4.235,-4.21008 -4.2348,-4.21009 -0.1404,-15.66485 -0.1403,-15.66486 -4.2426,-0.0331 c -2.966,-0.0232 -5.165,-0.0629 -6.1567,-0.0629 0.3918,-0.3918 3.9494,-4.30373 6.8124,-7.25889 16.3256,-16.85115 23.8248,-29.52677 30.9461,-52.30724 0.9574,-3.06265 1.9657,-5.72076 2.2405,-5.90691 0.2749,-0.18615 0.326,-0.61975 0.1135,-0.96355 -0.2524,-0.40839 -0.051,-0.56684 0.5807,-0.45705 0.727,0.12636 1.3947,1.57047 2.6913,5.82067 3.7835,12.40198 9.321,25.2263 14.0468,32.53115 4.2158,6.51663 9.8959,13.42609 17.2648,21.00162 l 7.17,7.37104 h -5.372 -5.372 v 15.5246 15.52459 l -4.2426,4.21776 -4.2427,4.21776 v 10.51842 10.51842 l 5.8337,10.08351 5.8336,10.08353 v 8.71123 8.71125 h 9.5459 9.546 v -2.25746 c 0,-1.75518 -0.649,-3.40943 -2.9169,-7.43497 l -2.9167,-5.1775 v -8.47494 -8.47494 h 3.7435 c 2.2752,0 2.9233,-0.002 3.1616,-0.51275 0.1402,-0.3004 1.0738,-1.89288 2.4494,-3.57972 8.3744,-10.26907 15.0644,-23.67019 19.0044,-38.06877 1.1468,-4.1908 1.9897,-6.36396 2.4686,-6.36396 0.3999,0 0.7502,0.35797 0.7783,0.79549 0.028,0.43753 0.1796,1.15347 0.3365,1.591 0.1569,0.43752 1.2955,4.01724 2.5304,7.95495 4.1187,13.13336 9.7236,24.02087 17.1162,33.24783 1.9767,2.46724 3.3489,4.33441 3.0493,4.14927 0.6384,0.94666 3.236,0.78599 3.4329,0.78666 h 3.9774 v 8.0532 8.05321 l -3.009,5.2682 -3.009,5.2682 -0.6408,6.96372 c -0.3524,3.83005 -0.8105,9.29054 -1.0179,12.13444 l -0.3772,5.17073 h 14.6086 14.6086 l -0.2938,-2.78425 c -0.2143,-2.03096 -1.0893,-4.21902 -3.2341,-8.08753 l -2.9402,-5.3033 -0.055,-8.04312 c -0.031,-4.42372 0.073,-8.17254 0.2319,-8.33072 0.158,-0.15819 2.0102,-0.33109 4.1161,-0.38423 2.5046,-0.0632 3.2514,-0.33462 3.4607,-0.75522 0.1488,-0.29935 1.1956,-1.95609 2.5395,-3.70395 8.4318,-10.96596 14.3824,-23.03301 18.3179,-37.14617 2.1729,-7.79284 2.8255,-7.72193 5.1293,0.55743 3.7654,13.53145 10.6954,27.34645 18.5438,36.9672 1.7628,2.16089 2.1501,2.98073 2.349,3.28141 0.2396,0.36251 0.6819,0.70321 3.0622,0.85197 l 4.2427,0.26517 v 8.22011 8.22012 l -2.9939,5.3033 c -2.8584,5.06309 -3.021,5.55552 -3.5911,10.87178 -1.2082,11.26717 -1.6499,18.1269 -2.1925,34.0464 -0.7989,23.44155 0.3307,48.21172 3.2309,70.84665 0.5713,4.45927 1.0388,8.45662 1.0388,8.883 0,0.67853 -22.5871,0.7752 -181.1435,0.7752 -172.2689,0 -181.13,-0.0457 -180.8682,-0.92805 v 7e-5 m 205.034,-35.37344 c 0,-32.00048 -0.095,-33.37711 -2.6623,-38.475 -6.2845,-12.48098 -21.5056,-16.96523 -33.5758,-9.89168 -2.719,1.59353 -7.3987,6.53475 -8.8065,9.2988 -2.6575,5.2179 -2.6851,5.61292 -2.6851,38.34255 v 30.66293 h 23.8648 23.8649 v -29.9376 m -171.2911,-78.03539 c 0,-8.0537 -0.1541,-10.11991 -0.8403,-11.26947 -2.8978,-4.85454 -9.8653,-4.89955 -12.6651,-0.0818 -0.9551,1.64344 -1.0997,2.96534 -1.2619,11.53468 l -0.1832,9.67853 h 7.4752 7.4753 v -9.86191 m 309.1824,-0.0964 c 0,-10.61625 -0.1111,-11.13288 -2.9005,-13.49132 -2.7064,-2.28818 -7.8071,-1.60262 -10.0609,1.3522 -1.267,1.66113 -1.3372,2.15683 -1.6876,11.91532 l -0.3655,10.18208 h 7.5072 7.5073 v -9.95828 m -231.8547,-17.58179 c -0.1791,-10.91709 -0.3189,-11.44704 -3.6813,-13.9574 -2.8295,-2.11252 -8.0329,-0.86134 -10.0283,2.41137 -0.9294,1.52419 -1.0354,2.71476 -1.0372,11.64152 v 9.94369 h 7.4567 7.4568 l -0.1667,-10.03918 m 154.9568,0.35238 c 0,-8.43476 -0.1277,-9.92564 -0.9881,-11.53468 -2.7196,-5.08644 -10.1534,-5.08644 -12.8731,0 -0.8603,1.60904 -0.988,3.09992 -0.988,11.53468 v 9.6868 h 7.4246 7.4246 v -9.6868 m -77.4281,-80.49044 c 0,-8.36555 -0.1269,-9.81418 -1.0103,-11.53468 -2.665,-5.19101 -10.3107,-5.24633 -12.9101,-0.0934 -0.7817,1.5495 -0.9274,3.3578 -0.9281,11.51664 v 9.67852 h 7.4247 7.4246 l -8e-4,-9.56706\"\r\n        style={{fill: objectColors.CASTLE}} />\r\n      <path\r\n        d=\"m 1040.7391,1166.1213 c 108.566,-139.645 317.8069,-276.246 467.5196,-302.496 h 352.1392 c 72.2002,9 138.9465,48.79043 138.9465,48.79043 v 255.82697 c 0,0 -825.3186,-2.1214 -958.6053,-2.1214 z\"\r\n        style={{fill: objectColors.CASTLE}} />\r\n    </motion.g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nfunction OpenEnvelope({ scale, filter, children }) {\r\n  const [ { objectColors } ] = useContext(ColorContext);\r\n  const gProps = {\r\n    transform: `scale(${scale || 1})`,\r\n  }\r\n  if (filter !== undefined) gProps['filter'] = `url(#${filter})`;\r\n  return (\r\n    <g {...gProps}>\r\n      <path\r\n        d=\"m 0,150 v -158 q 0,-7 5.065,-10.131 l 106.154,-65.608 q 10.130,-6.261 20.261,0 l 106.154,65.608 q 5.065,3.131 5.065,10.131 v 158 Z\"\r\n        style={{fill: objectColors.ENVELOPE_FLAP}} />\r\n      {children}\r\n      <path\r\n        d=\"m 0,5 q 10,0 15.065,3.131 l 76.285,47.148 60,0 76.285,-47.148 q 5.065,-3.131 15.065,-3.131 v 145 h -242.7 Z\"\r\n        style={{fill: objectColors.ENVELOPE_BODY}} />\r\n    </g>\r\n  );\r\n}\r\n\r\n\r\nfunction ClosedEnvelope({ scale, filter }) {\r\n  const [ { objectColors } ] = useContext(ColorContext);\r\n  const gProps = {\r\n    transform: `scale(${scale || 1})`,\r\n  }\r\n  if (filter !== undefined) gProps['filter'] = `url(#${filter})`;\r\n  return (\r\n    <g {...gProps}>\r\n      <rect x=\"0\" y=\"0\" width=\"242.7\" height=\"150\" style={{fill: objectColors.ENVELOPE_BODY}} />\r\n      <path\r\n        d=\"m 0,0 v 8 q 0,7 5.065,10.131 l 106.154,65.608 q 10.130,6.261 20.261,0 l 106.154,-65.608 q 5.065,-3.131 5.065,-10.131 v -8 Z\"\r\n        style={{fill: objectColors.ENVELOPE_FLAP}} />\r\n    </g>\r\n  );\r\n}\r\n\r\n\r\nexport default function Envelope({ scale, filter, open, children }) {\r\n  return (\r\n    open\r\n    ? <OpenEnvelope {...{scale, filter}}>{children}</OpenEnvelope>\r\n    : <ClosedEnvelope {...{scale, filter}} />\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport Envelope from '../elements/envelope';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nexport default function Letters() {\r\n  const [ { objectColors } ] = useContext(ColorContext);\r\n  const variants1 = {\r\n    hide: {\r\n      rotate: 50,\r\n      transition: {ease: 'easeIn', duration: 0.7},\r\n    },\r\n    show: {\r\n      rotate: -20,\r\n      transition: {ease: 'easeOut', duration: 1},\r\n    },\r\n  };\r\n  const variants2 = {\r\n    hide: {\r\n      rotate: -10,\r\n      transition: {ease: 'easeIn', duration: 0.7},\r\n    },\r\n    show: {\r\n      rotate: 25,\r\n      transition: {ease: 'easeOut', duration: 1},\r\n    },\r\n  };\r\n  const variants3 = {\r\n    hide: {\r\n      rotate: -60,\r\n      transition: {ease: 'easeIn', duration: 0.7},\r\n    },\r\n    show: {\r\n      rotate: 10,\r\n      transition: {ease: 'easeOut', duration: 1},\r\n    },\r\n  };\r\n  const variantsOpen = {\r\n    hide: {\r\n      y: 1300,\r\n      transition: {ease: 'easeIn', duration: 0.7, delay: 0.5},\r\n    },\r\n    show: {\r\n      y: 900,\r\n      transition: {ease: 'easeOut', duration: 1},\r\n    },\r\n  };\r\n  const variantsPaper = {\r\n    hide: {\r\n      y: 0,\r\n      transition: {ease: 'easeIn', duration: 0.7}\r\n    },\r\n    show: {\r\n      y: -110,\r\n      transition: {ease: 'easeOut', duration: 0.5, delay: 0.5}\r\n    },\r\n    recolor: {\r\n      fill: objectColors.PAPER_GB,\r\n      transition: {ease: 'easeInOut', duration: 0.2, delay: 1}\r\n    },\r\n    uncolor: {\r\n      fill: objectColors.PAPER,\r\n      transition: {ease: 'easeInOut', duration: 0.2}\r\n    },\r\n  };\r\n  return (\r\n    <motion.g\r\n      variants={['hide', 'show']}\r\n      initial=\"hide\"\r\n      animate=\"show\"\r\n      exit=\"hide\">\r\n      <defs>\r\n        <filter id=\"letterLighten\">\r\n          <feColorMatrix\r\n            in=\"SourceGraphic\"\r\n            type=\"matrix\"\r\n            values=\"1 0 0 0 0.05\r\n                    0 1 0 0 0.05\r\n                    0 0 1 0 0.05\r\n                    0 0 0 1 0\" />\r\n        </filter>\r\n        <filter id=\"letterDarken\">\r\n          <feColorMatrix\r\n            in=\"SourceGraphic\"\r\n            type=\"matrix\"\r\n            values=\"1 0 0 0 -0.05\r\n                    0 1 0 0 -0.05\r\n                    0 0 1 0 -0.05\r\n                    0 0 0 1 0\" />\r\n        </filter>\r\n      </defs>\r\n      <motion.g\r\n        variants={variants1}\r\n        style={{x: 1000, y: 950, originX: '-400px', originY: '0px'}}>\r\n        <Envelope scale={1.4} filter=\"letterLighten\" />\r\n      </motion.g>\r\n      <motion.g\r\n        variants={variants2}\r\n        style={{x: 1550, y: 1100, originX: '1000px', originY: '0px'}}>\r\n        <Envelope scale={1.7} filter=\"letterDarken\" />\r\n      </motion.g>\r\n      <motion.g\r\n        variants={variants3}\r\n        style={{x: 1120, y: 1000, originX: '500px', originY: '150px'}}>\r\n        <Envelope scale={2} filter=\"letterDarken\" />\r\n      </motion.g>\r\n      <motion.g\r\n        variants={variantsOpen}\r\n        style={{x: 1280}}>\r\n        <Envelope scale={2.3} open>\r\n          <motion.rect\r\n            variants={variantsPaper}\r\n            initial={['hide', 'uncolor']}\r\n            animate={['show', 'recolor', objectColors.PAPER_GB]}\r\n            exit={['hide', 'uncolor']}\r\n            style={{x: 10, width: 222.7, height: 300}} />\r\n        </Envelope>\r\n      </motion.g>\r\n    </motion.g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion, useMotionValue, useTransform } from 'framer-motion';\r\nimport chroma from 'chroma-js';\r\nimport { ColorContext } from '../../../colorscheme';\r\n\r\n\r\nfunction range(n) {\r\n  const arr = [];\r\n  for (let i = 0; i < n; i++) arr.push(i);\r\n  return arr;\r\n}\r\n\r\n\r\nfunction Layer({x, y, rx, ry, color, height, children}) {\r\n  const highlightColor = chroma(color).brighten(0.2).hex();\r\n  const variants = {\r\n    init: {y: -300, opacity: 0},\r\n    show: {y: 0, opacity: 1, transition: {ease: 'easeOut', duration: 0.5}},\r\n    exit: {y: -300, opacity: 0, transition: {ease: 'easeIn', duration: 0.5}},\r\n  }\r\n  return (\r\n    <motion.g variants={variants}>\r\n      <ellipse cx={x} cy={y} rx={rx} ry={ry} style={{fill: color}} />\r\n      <rect x={x - rx} y = {y - height} width={2 * rx} height={height} style={{fill: color}} />\r\n      <ellipse cx={x} cy={y - height} rx={rx} ry={ry} style={{fill: highlightColor}} />\r\n      {children}\r\n    </motion.g>\r\n  );\r\n}\r\n\r\nfunction Strawberry(props) {\r\n  return (\r\n    <motion.path {...props} d=\"m 5.1862317,63.361928 c -5.96337984,-2.39123 -8.4002799,-2.47017 -14.9472199,-0.48421 -6.2531998,1.89686 -13.2898498,0.68775 -22.4282798,-3.85386 -7.94574,-3.94887 -11.46829,-8.6105 -14.57106,-19.282881 -4.44021,-15.2727 -1.26001,-30.8755603 12.20596,-59.88561 11.18546,-24.09707 16.19403,-31.52399 24.1964,-35.87942 6.4556498,-3.51361 15.3930997,-3.68982 19.6593399,-0.38759 5.3332301,4.12811 7.1695301,6.23688 11.1173701,12.76701 14.41104,23.83727 24.78727,49.9316697 27.74517,69.7742 0,0 0.0316,10.27421 0.0316,10.27421 0,0 -1.75463,7.725791 -1.75463,7.725791 -4.34302,10.30943 -12.40727,18.68647 -18.89384,19.62668 -11.89373,1.72397 -17.31656,1.62834 -22.3607803,-0.39432 0,0 -3e-5,0 -3e-5,0\" />\r\n  );\r\n}\r\n\r\n\r\nfunction TopSpinBerry({cx, cy, rx, ry, t, offset, style}) {\r\n  const omega = useTransform(t, v => offset + 2 * Math.PI * v)\r\n  const x = useTransform(omega, v => cx + rx * Math.cos(v));\r\n  const y = useTransform(omega, v => cy + ry * Math.sin(v));\r\n  return (\r\n    <Strawberry style={{...style, x, y}} />\r\n  );\r\n}\r\n\r\nfunction MidSpinBerry({cx, cy, rx, ry, t, offset, scale, style, text, textColor}) {\r\n  const omega = useTransform(t, v => (offset + 2 * Math.PI * v) % Math.PI)\r\n  const x = useTransform(omega, v => cx + rx * Math.cos(v));\r\n  const y = useTransform(omega, v => cy + ry * Math.sin(v));\r\n  const scaleX = useTransform(omega, v => scale * Math.sin(v))\r\n  return (\r\n    <motion.g style={{x, y, scaleY: scale, scaleX}}>\r\n      <Strawberry style={style} />\r\n      {(text !== undefined) && <motion.text style={{x: -25, y: 20, fontSize: 90, fontFamily: 'Gochi Hand', fill: textColor}}>{text}</motion.text>}\r\n    </motion.g>\r\n  );\r\n}\r\n\r\n\r\nexport default function Milestone() {\r\n  const [ { specialColors } ] = useContext(ColorContext);\r\n\r\n  const delay = 0.5;\r\n\r\n  const x2y = 0.3;\r\n  const radius = 350;\r\n  const center = 960;\r\n  const bottom = 750;\r\n  const spongeHeight = 100;\r\n  const icingHeight = 80;\r\n  const topIcingHeight = 15;\r\n  const numMidBerries = 15;\r\n  const numTopBerries = 8;\r\n\r\n  const midBerryY = bottom - spongeHeight - icingHeight / 2;\r\n  const topBerryY = bottom - spongeHeight - icingHeight - spongeHeight - topIcingHeight - 50;\r\n\r\n  const t = useMotionValue(0);\r\n\r\n  let seed = 20200722;\r\n\r\n  const variants = {\r\n    init: {scaleX: 1, scaleY: 1},\r\n    show: {transition: {staggerChildren: 0.25, delayChildren: delay}},\r\n    idle: {t: [0, 1], transition: {ease: 'linear', duration: 30, loop: Infinity}},\r\n    exit: {transition: {staggerChildren: 0.1, staggerDirection: -1}},\r\n  }\r\n\r\n  const omega = useTransform(t, v => -6 * Math.PI * (v + 0.75));\r\n  const x = useTransform(omega, v => 200 * Math.cos(v));\r\n  const y = useTransform(omega, v => 120 * Math.sin(v));\r\n\r\n  return (\r\n    <motion.g initial=\"init\" animate={['show', 'idle']} exit=\"exit\" variants={variants} style={{t, x, y}}>\r\n      <Layer x={center} y={bottom} rx={radius} ry={x2y * radius} height={spongeHeight} color={specialColors.CAKE_SPONGE} />\r\n      <Layer x={center} y={bottom - spongeHeight} height={icingHeight} rx={radius} ry={x2y * radius} color={specialColors.CAKE_ICING}>\r\n        {range(numMidBerries).map((n, i) => {\r\n          const offset = Math.PI / (numMidBerries) * n;\r\n          seed = (seed * 11587 + 2731) % 3881;\r\n          const rotate = seed % 360;\r\n          return (\r\n            <MidSpinBerry\r\n              key={`midBerry${i}`}\r\n              t={t}\r\n              cx={center}\r\n              cy={midBerryY}\r\n              rx={radius}\r\n              ry={x2y * radius}\r\n              offset={offset}\r\n              scale={0.6}\r\n              text={' yadhtriB yppaH'.charAt(i)}\r\n              textColor={specialColors.CAKE_ICING}\r\n              style={{rotate, fill: specialColors.CAKE_STRAWBERRY}} />\r\n          );\r\n        })}\r\n        \r\n      </Layer>\r\n      <Layer x={center} y={bottom - spongeHeight - icingHeight} height={spongeHeight} rx={radius} ry={x2y * radius} color={specialColors.CAKE_SPONGE} />\r\n      <Layer x={center} y={bottom - 2 * spongeHeight - icingHeight} rx={radius} ry={x2y * radius} height={topIcingHeight} color={specialColors.CAKE_ICING}>\r\n        {range(numTopBerries).map((n, i) => {\r\n          const offset = Math.PI * (2 * (n + 0.1) / numTopBerries - 1);\r\n          return (\r\n            <TopSpinBerry\r\n              key={`topBerry${i}`}\r\n              t={t}\r\n              cx={center}\r\n              cy={topBerryY}\r\n              rx={0.5 * radius}\r\n              ry={x2y * 0.5 * radius}\r\n              offset={offset}\r\n              style={{scale: 0.9, fill: specialColors.CAKE_STRAWBERRY}} />\r\n          );\r\n        })}\r\n      </Layer>\r\n    </motion.g>\r\n  );\r\n}","import React, { createContext } from 'react';\r\nimport { useLocalStorageReducer } from './util';\r\nimport Stripes from './parts/background/scenes/stripes';\r\nimport Dots from './parts/background/scenes/dots';\r\nimport Solid from './parts/background/scenes/solid';\r\nimport Circles from './parts/background/scenes/circles';\r\nimport NightSky from './parts/background/scenes/nightsky';\r\nimport HeartScatter from './parts/background/scenes/heartscatter';\r\nimport Castle from './parts/background/elements/castle';\r\nimport Letters from './parts/background/scenes/letters';\r\nimport Milestone from './parts/background/elements/milestone';\r\n\r\nexport const BACKDROPS = [\r\n  {\r\n    icon: <i className=\"fas fa-square\" />,\r\n    element: <Solid key=\"solid\" n={6} />,\r\n    colors: { group: 'backgroundColors', keys: ['BACK_BG'] },\r\n  },\r\n  {\r\n    icon: [<i key=\"1\" className=\"fas fa-grip-lines-vertical\" />, <i key=\"2\" className=\"fas fa-grip-lines-vertical\" />],\r\n    element: <Stripes key=\"stripes\" n={8} />,\r\n    colors: { group: 'backgroundColors', keys: ['BACK_BG', 'BACK_FG'] },\r\n  },\r\n  {\r\n    icon: [<i key=\"1\" className=\"fas fa-ellipsis-v\" />, <i key=\"2\" className=\"fas fa-ellipsis-v\" />, <i key=\"3\" className=\"fas fa-ellipsis-v\" />],\r\n    element: <Dots key=\"dots\" spacing={200} />,\r\n    colors: { group: 'backgroundColors', keys: ['BACK_BG', 'BACK_FG'] },\r\n  },\r\n  {\r\n    icon: <i className=\"fas fa-circle\" />,\r\n    element: <Circles key=\"circles\" />,\r\n    colors: { group: 'backgroundColors', keys: ['BACK_BG', 'BACK_FG', 'BACK_HL'] },\r\n  },\r\n];\r\n\r\nexport const DRESSINGS = [\r\n  {\r\n    icon: <i className=\"fas fa-times\" style={{marginLeft: 2, marginRight: 1}} />,\r\n    element: null,\r\n    colors: { group: 'dressingColors', keys: [] },\r\n  },\r\n  {\r\n    icon: <i className=\"fas fa-star\" />,\r\n    element: <NightSky key=\"nightsky\" />,\r\n    colors: { group: 'dressingColors', keys: ['STAR', 'MOONSHADOW', 'STRING'] },\r\n  },\r\n  {\r\n    icon: <i className=\"fas fa-heart\" style={{marginLeft: 1, marginRight: 1}} />,\r\n    element: <HeartScatter key=\"heartscatter\" />,\r\n    colors: { group: 'dressingColors', keys: ['HEART1', 'HEART2', 'HEART3'] },\r\n  },\r\n];\r\n\r\nexport const OBJECTS = [\r\n  {\r\n    icon: <i className=\"fas fa-times\" style={{marginLeft: 2, marginRight: 1}} />,\r\n    element: null,\r\n    colors: { group: 'objectColors', keys: [] },\r\n  },\r\n  {\r\n    icon: <i className=\"fab fa-fort-awesome\" style={{marginLeft: 1, marginRight: 1}} />,\r\n    element: <Castle key=\"castle\" />,\r\n    colors: { group: 'objectColors', keys: ['CASTLE'] },\r\n  },\r\n  {\r\n    icon: <i className=\"fas fa-envelope\" style={{marginLeft: 1, marginRight: 1}} />,\r\n    element: <Letters key=\"letters\" />,\r\n    colors: { group: 'objectColors', keys: ['ENVELOPE_BODY', 'ENVELOPE_FLAP', 'PAPER', 'PAPER_GB'] },\r\n  },\r\n];\r\n\r\nexport const SPECIALS = [\r\n  {\r\n    icon: <i className=\"fas fa-times\" style={{marginLeft: 2, marginRight: 1}} />,\r\n    element: null,\r\n    colors: { group: 'specialColors', keys: [] },\r\n  },\r\n  {\r\n    icon: <i className=\"fas fa-birthday-cake\" style={{marginLeft: 2, marginRight: 2}} />,\r\n    element: <Milestone key=\"milestone\" />,\r\n    colors: { group: 'specialColors', keys: ['CAKE_SPONGE', 'CAKE_ICING', 'CAKE_STRAWBERRY'] },\r\n  },\r\n];\r\n\r\nconst initialState = {\r\n  showBackground: true,\r\n  showCharacter: true,\r\n  backdropIndex: 3,\r\n  dressingIndex: 1,\r\n  objectIndex: 1,\r\n  specialIndex: 1,\r\n  rate: 3.5,\r\n  swing: 4.5,\r\n  bob: 30,\r\n  bgmURL: '',\r\n};\r\n\r\nfunction Reducer(state, { type, value }) {\r\n  switch (type) {\r\n    case 'SHOW_CHARACTER':\r\n      return {\r\n        ...state,\r\n        showCharacter: value,\r\n      }\r\n    case 'SHOW_BACKGROUND':\r\n      return {\r\n        ...state,\r\n        showBackground: value,\r\n      }\r\n    case 'SET_BACKDROP':\r\n      return {\r\n        ...state,\r\n        backdropIndex: value,\r\n      }\r\n    case 'SET_DRESSING':\r\n      return {\r\n        ...state,\r\n        dressingIndex: value,\r\n      }\r\n    case 'SET_OBJECT':\r\n      return {\r\n        ...state,\r\n        objectIndex: value,\r\n      }\r\n    case 'SET_SPECIAL':\r\n      return {\r\n        ...state,\r\n        specialIndex: value,\r\n      }\r\n    case 'SET_RATE':\r\n      return {\r\n        ...state,\r\n        rate: value,\r\n      }\r\n    case 'SET_SWING':\r\n      return {\r\n        ...state,\r\n        swing: value,\r\n      }\r\n    case 'SET_BOB':\r\n      return {\r\n        ...state,\r\n        bob: value,\r\n      }\r\n    case 'SET_BGM':\r\n      return {\r\n        ...state,\r\n        bgmURL: value,\r\n      }\r\n    case 'RESET':\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const SceneContext = createContext(initialState);\r\nexport default function Scene({ children }) {\r\n  const [ state, dispatch ] = useLocalStorageReducer('scene', Reducer, initialState);\r\n  return (\r\n    <SceneContext.Provider value={[state, dispatch]}>\r\n      {children}\r\n    </SceneContext.Provider>\r\n  );\r\n}\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { motion, useAnimation } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\nimport Shoulders from './shoulders';\r\nimport { SceneContext } from '../../scene';\r\n\r\nfunction SideTail({ rate, swing }) {\r\n  const [{ matsuriColors } ] = useContext(ColorContext);\r\n  const sideTailSwing = swing * 0.8;\r\n  const variants = {\r\n    sideTail: {rotate: [sideTailSwing, -sideTailSwing, sideTailSwing], transition: {ease: 'easeInOut', delay: rate * 0.15, duration: rate, loop: Infinity}},\r\n  };\r\n  return (\r\n    <motion.g\r\n      variants={variants}\r\n      animate={['sideTail', `r${rate}s${swing}`]}\r\n      style={{originX: '930px', originY: '245px'}}>\r\n\r\n      <defs>\r\n        <path\r\n          id=\"hair_sidetail\"\r\n          d=\"m 906.99568,257.27677 c 0,0 -8.69295,-43.75566 12.41745,-55.13587 21.11031,-11.38021 55.37288,-7.58139 82.55167,31.15826 27.179,38.73966 16.9135,64.49105 16.9935,77.31777 0.08,12.82671 9.0949,29.11697 9.0949,29.11697 0,0 -6.3687,1.91449 -10.9835,0.29877 -4.6147,-1.61575 -7.8637,-5.73962 -7.8637,-5.73962 0,0 -4.7579,17.59311 -0.2865,38.41764 4.4714,20.82458 1.5655,45.31311 -13.85897,56.03292 -15.42444,10.71981 -31.29936,7.23382 -31.29936,7.23382 0,0 4.2177,-4.03892 6.3913,-8.85447 2.17358,-4.81555 1.96393,-12.05014 1.96393,-12.05014 0,0 -2.56657,0.0802 -5.32256,2.06408 -2.43473,1.75269 -4.40974,4.24417 -4.40974,4.24417 0,0 -3.44387,-7.27583 -3.16777,-16.64677 0.35286,-11.97428 0.89399,-43.71375 -15.16184,-74.06634 -16.95044,-32.0438 -37.0588,-73.3912 -37.0588,-73.3912 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.HAIR}} />\r\n\r\n        <clipPath id=\"hair_sidetail_clip\">\r\n          <use href=\"#hair_sidetail\" />\r\n        </clipPath>\r\n      </defs>\r\n\r\n      <use href=\"#hair_sidetail\" />\r\n      <path\r\n        id=\"hair_sidetail_shadow\"\r\n        clipPath=\"url(#hair_sidetail_clip)\"\r\n        d=\"m 926.60301,216.70019 c -1.71397,-0.0293 -3.34131,0.1084 -4.85303,0.42481 -16.125,3.375 -11.99999,26.625 -11.99999,26.625 0,0 9,43.12499 24.00001,109.12501 C 948.74998,418.875 958.12498,444 958.12498,444 c 0,0 45.00002,-1.50001 57.75002,-25.87499 12.75,-24.375 -8.25,-52.12502 -8.25,-52.12502 0,0 4.875,16.12502 -2.25,33.375 -6.85073,16.58608 -19.5,19.50001 -19.5,19.50001 0,0 8.42091,-22.69066 4.125,-41.24999 -6.17386,-26.67237 -12.17041,-36.3547 -12.75001,-59.25002 -0.74999,-29.625 5.62499,-38.24999 -2.25,-62.99999 -7.1367,-22.42969 -31.82828,-38.39104 -48.39698,-38.67481 0,0 0,0 0,0 M 1011.375,310.5 c 0,0 0.5273,5.80819 -0.1874,11.81251 -0.9374,7.87499 -2.25,14.24999 -2.25,14.24999 0,0 23.4375,16.87499 23.4375,16.87499 0,0 -4.875,-30.18747 -4.875,-30.18747 0,0 -1.5,1.49998 -7.875,-3.37501 -5.3037,-4.05575 -8.25,-9.375 -8.25,-9.375 0,0 0,0 0,0\"\r\n        style={{fill: matsuriColors.HAIR_SHADOW}}/>\r\n\r\n    </motion.g>\r\n  );\r\n}\r\n\r\nexport default function Head() {\r\n  const [ { rate, swing } ] = useContext(SceneContext);\r\n  const [ { matsuriColors } ] = useContext(ColorContext);\r\n  const rerenderKey = `r${rate}s${swing}`;\r\n  const headSwing = swing * 0.5;\r\n  const breathRate = rate * 1.4;\r\n  const variants = {\r\n    sway: {\r\n      rotate: [-headSwing, headSwing, -headSwing],\r\n      transition: {ease: 'easeInOut', duration: breathRate * 0.7, repeatDelay: breathRate * 0.3, loop: Infinity},\r\n    },\r\n  };\r\n  const style = {y: '5px', originX: '910px', originY: '445px'}\r\n  const ahogeVariants = {\r\n    largeFlick: {\r\n      rotate: 0,\r\n      transition: {type: 'spring', velocity: 200, stiffness: 150, damping: 2, mass: 0.3},\r\n    },\r\n    smallFlick: {\r\n      rotate: 0,\r\n      transition: {type: 'spring', velocity: 100, stiffness: 150, damping: 3, mass: 0.3, delay: rate * 1.8},\r\n    },\r\n  };\r\n  const ahogeControl = useAnimation();\r\n  const ahogeLoop = () => { ahogeControl.start('smallFlick').then(ahogeLoop) };\r\n  useEffect(ahogeLoop, [ahogeControl, rate]);\r\n  const faceVariants = {\r\n    squashX: {\r\n      scaleX: 1,\r\n      transition: {type: 'spring', velocity: 0.4, stiffness: 150, damping: 2, mass: 0.5},\r\n    },\r\n    squashY: {\r\n      scaleY: 1,\r\n      transition: {type: 'spring', velocity: 0.4, stiffness: 150, damping: 2, mass: 0.5},\r\n    },\r\n  };\r\n  const faceControl = useAnimation();\r\n  return (\r\n    <React.Fragment>\r\n\r\n      <motion.g\r\n        animate={['sway', rerenderKey]}\r\n        style={style}\r\n        variants={variants}>\r\n        <SideTail rate={rate} swing={swing} />\r\n      </motion.g>\r\n\r\n      <Shoulders rate={breathRate} />\r\n\r\n      <path\r\n        id=\"hair_side_left\"\r\n        d=\"m 964.12125,392.35166 c 0,0 8.76928,21.5349 6.9131,39.3198 -1.66269,15.93128 -15.90987,33.41081 -19.09185,46.93422 -3.182,13.52341 2.91685,26.78165 2.91685,26.78165 0,0 -20.95534,-7.49529 -14.31893,-31.02429 5.83359,-20.68288 18.49037,-26.18927 23.06931,-40.83542 5.09857,-16.30805 -2.67046,-39.3198 -2.67046,-39.3198 l 3.18197,-1.85615\"\r\n        style={{fill: matsuriColors.HAIR}} />\r\n\r\n      <motion.g\r\n        animate={['sway', rerenderKey]}\r\n        style={style}\r\n        variants={variants}>\r\n\r\n        <defs>\r\n          <path\r\n            id=\"hair_back\"\r\n            d=\"m 971.56468,399.58651 c 0,0 20.15257-8.48529 19.62227-37.12311 -0.53033-28.63783 -19.09193-71.59456 -57.27572-101.82338 -38.1837-30.22881 -88.03477-46.66904 -151.14404-18.56155 -63.10928,28.10749 -71.59456,124.09724 -60.98794,163.34166 10.60659,39.24442 46.13868,73.7159 65.23061,72.65523 19.09185-1.06067 73.71584,1.06067 118.2636-21.21321 44.54768-22.27385 66.29122-57.27563 66.29122-57.27563 0,0 0,0 0,0\"\r\n            style={{fill: matsuriColors.HAIR}} />\r\n          <path\r\n            id=\"skin_face\"\r\n            d=\"m 904.47797,265.41299 c 29.43332,17.76605 46.93422,57.27565 52.76778,75.83719 5.83367,18.56154 15.08805,36.76944 15.87781,49.0422 0.84059,13.0631 -11.21899,46.42087 -39.18563,69.16258 -36.4847,29.66837 -94.95578,37.18193 -119.35094,23.39334 -24.39519-13.78857 -68.41259-40.30506 -76.36754-101.29303 -7.95495-60.98797 22.80419-98.11107 54.62399-114.5513 31.8198-16.44023 82.20124-19.35704 111.63453-1.59098 0,0 0,0 0,0\"\r\n            style={{fill: matsuriColors.SKIN}} />\r\n          <path\r\n            id=\"hair_bangs\"\r\n            d=\"m 866.8245,434.32311 c 0,0 11.40208,-12.99308 17.23575,-33.14563 5.83364,-20.15254 3.18195,-49.58586 3.18195,-49.58586 0,0 4.50782,8.48529 7.68986,15.11442 3.18195,6.62913 5.83362,18.03121 5.83362,18.03121 0,0 9.01559,-13.25823 10.87177,-28.37265 1.8561,-15.11442 -5.03821,-38.71409 -5.03821,-38.71409 0,0 12.46283,9.28077 21.21324,24.39516 8.75047,15.11442 8.75047,30.49398 8.75047,30.49398 0,0 6.36398,-1.06064 14.58405,-14.3189 8.22016,-13.25826 10.34144,-49.05553 -5.83364,-70.79907 -16.17503,-21.74352 -81.14049,-69.7384 -148.75756,-36.06244 -67.6171,33.67595 -73.98105,120.11978 -59.66215,159.09902 14.31896,38.97927 36.59275,63.90479 66.55646,67.08677 29.96362,3.18197 39.24437,0.53033 39.24437,0.53033 0,0 -14.31884,-8.75044 -23.86485,-19.62221 -9.54592,-10.87177 -14.05375,-22.0087 -14.05375,-22.0087 0,0 3.18203,-11.93244 6.09885,-34.47147 2.91682,-22.539 0.53033,-49.32068 0.53033,-49.32068 0,0 5.83364,21.74355 18.56151,44.0174 12.72796,22.27385 36.85793,37.65342 36.85793,37.65342 0,0 0,0 0,0\"\r\n            style={{fill: matsuriColors.HAIR}} />\r\n\r\n          <clipPath id=\"hair_back_clip\">\r\n            <use href=\"#hair_back\" />\r\n          </clipPath>\r\n          <clipPath id=\"skin_face_clip\">\r\n            <use href=\"#skin_face\" />\r\n          </clipPath>\r\n          <clipPath id=\"hair_bangs_clip\">\r\n            <use href=\"#hair_bangs\" />\r\n          </clipPath>\r\n        </defs>\r\n\r\n        <path\r\n          id=\"scrunchie\"\r\n          d=\"m 943.66777,279.1899 c -5.84237-0.69912 -9.46006-2.00814 -19.81386-7.16945 -9.94555-4.9578 -24.53355-14.78718 -31.78624-21.41755 -5.17558-4.73149 -13.63895-14.48609 -14.45159-16.65644 -0.91967-2.45618 1.4567-8.39516 4.78134-11.94947 3.69539-3.95066 5.95066-5.24374 9.1457-5.24374 1.87325,0 2.57669,0.39019 3.48965,1.93572 0,0 1.14347,1.93572 1.14347,1.93572 0,0 2.82509-2.15645 2.82509-2.15645 3.85727-2.94431 8.34608-4.1591 11.6788-3.16059 3.64017,1.09062 4.95337,2.85695 5.30858,7.14037 0,0 0.30342,3.65899 0.30342,3.65899 0,0 1.79572-0.9286 1.79572-0.9286 2.43218-1.25774 9.51605-3.05193 12.04968-3.05193 4.02987,0 6.90653,5.69166 5.55928,10.99942 -0.38058,1.4994 -0.6302,2.78794 -0.55468,2.86344 0.0754,0.07551 2.12445-0.3382 4.55326-0.91933 2.42878-0.58113 5.18465-0.86367 6.12414-0.62788 3.12148,0.78345 3.9109,5.6076 2.1657,13.235 -0.36085,1.57711 -0.13748,1.7717 2.93644,2.55955 3.63674,0.93207 6.18823,2.86088 6.16326,4.65917 -0.0085,0.63207 -0.75495,2.94694 -1.65815,5.14416 -0.90323,2.19721 -1.57612,4.05448 -1.4953,4.12726 0.08079,0.07279 1.28038,0.60204 2.66567,1.17613 1.99729,0.82771 2.5187,1.40541 2.5187,2.79056 0,2.47406 -1.71935,5.58794 -4.91445,8.90036 -2.96515,3.07402 -2.92572,3.06595 -10.5336,2.15557 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.YELLOW}} />\r\n        <use href=\"#hair_back\" />\r\n        <path\r\n          id=\"hair_back_shadow\"\r\n          clipPath=\"url(#hair_back_clip)\"\r\n          d=\"m 724.43115,317.38476 c 0,0 -39.7749,112.96142 -39.7749,112.96142 0,0 151.14404,108.71776 151.14404,108.71776 0,0 56.21482-41.3657 56.21482-41.3657 0,0 -48.78952-24.92578 -48.78952-24.92578 0,0 -67.10573-12.85756 -97.3345-48.38967 -31.16358-36.63096 -21.45994-106.99804 -21.45994-106.99804 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.HAIR_SHADOW}} />\r\n        <motion.g\r\n          animate={faceControl}\r\n          style={{scaleX: 1, scaleY: 1}}\r\n          variants={faceVariants}\r\n          onClick={() => faceControl.start(['squashX', 'squashY'])}>\r\n          <use href=\"#skin_face\" />\r\n          <path\r\n            id=\"skin_face_shadow\"\r\n            clipPath=\"url(#skin_face_clip)\"\r\n            d=\"m 801.375,449.25001 c 0,0 7.5,-9.75 14.625,-28.5 6.84947,-18.02491 7.125,-27 7.125,-27 0,0 8.0779,13.68551 21,25.5 13.125,12 25.125,18 25.125,18 0,0 10.875,-12.75 18.375,-29.625 6.36031,-14.31071 7.875,-31.5 7.875,-31.5 0,0 1.5,2.25 3,6.75 1.5,4.5 1.5,8.25 1.5,8.25 0,0 9.60234,-10.16441 15.75,-28.125 5.36376,-15.6704 2.25,-27.37499 2.25,-27.37499 0,0 4.59831,5.54065 10.875,18 6.56473,13.03113 6,23.99999 6,23.99999 0,0 9.20381,-4.12242 18,-13.5 9.75231,-10.3969 11.625,-25.87499 11.625,-25.87499 0,0 -51.375,-67.5 -124.125,-40.875 -72.75,26.625 -39,151.87499 -39,151.87499 z\"\r\n            style={{fill: matsuriColors.SKIN_SHADOW}} />\r\n        </motion.g>\r\n        <use href=\"#hair_bangs\" />\r\n        <path\r\n          id=\"hair_bangs_shadow\"\r\n          clipPath=\"url(#hair_bangs_clip)\"\r\n          d=\"m 730.21119,356.58102 c 0,0 2.06294,44.85549 39.33547,80.95853 33.3934,32.34566 90.11835,49.55139 90.11835,49.55139 0,0 25.45591,40.83542 25.45591,40.83542 0,0 -94.39875,32.88047 -136.82517,-19.09188 -42.4264,-51.97235 -18.08456,-152.25347 -18.08456,-152.25347 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.HAIR_SHADOW}} />\r\n        <path\r\n          id=\"eyes\"\r\n          d=\"m 835.30037,462.49019 c -1.91673,-1.11419 -3.40067,-5.15316 -2.35585,-6.41211 0.46128,-0.55579 4.34548,-2.76846 8.63161,-4.917 4.2861,-2.14858 8.2006,-4.3977 8.69888,-4.9981 0.49827,-0.60041 1.09763,-3.1824 1.33183,-5.7378 0.23414,-2.5554 0.59726,-4.81757 0.80671,-5.02702 0.20948,-0.20948 1.257,0.076 2.32784,0.63451 2.92175,1.78421 4.39934,3.04906 6.18457,4.40014 l 3.59028,-3.23096 c 6.62882,-5.9654 7.0541,-6.20235 9.20611,-5.12878 1.04003,0.51883 2.43034,1.53933 3.08957,2.26774 1.13936,1.25901 1.14174,1.46645 0.0482,4.19944 -4.80963,12.02043 -14.11551,19.49905 -28.64268,23.01854 -7.51204,1.81993 -10.96075,2.06861 -12.91708,0.93141 h 3e-5 m 88.70975,-58.76594 c -0.19871,-0.32261 -0.57036,-1.98383 -0.82593,-3.69162 -0.53478,-3.57335 0.11735,-4.46057 6.16643,-8.3878 1.91494,-1.24325 3.67053,-2.56595 3.90129,-2.93933 0.34929,-0.56517 0.59511,-3.08611 0.96695,-9.91534 0.0624,-1.14727 1.79212,-1.05321 5.30538,0.28851 l 2.95379,1.12808 5.46437,-5.84317 c 3.00538,-3.21372 5.8055,-5.83707 6.22244,-5.82965 0.41692,0.009 1.1554,0.99578 1.641,2.19637 0.4856,1.20059 1.18817,2.3898 1.56129,2.64271 0.98974,0.6709 -1.21912,7.27934 -4.53073,13.55482 -1.91344,3.62599 -4.10153,6.51266 -6.97572,9.20288 -3.57537,3.34653 -4.99961,4.17691 -9.73902,5.67828 -6.18046,1.95786 -11.56127,2.80877 -12.11156,1.91526 v 0\"\r\n          style={{fill: matsuriColors.EYES}} />\r\n        <path\r\n          id=\"eyebrows\"\r\n          d=\"m 807.00887,421.44031 c 0.2622,-1.57 1.01534,-4.22751 1.67346,-5.90559 5.43246,-13.85178 26.42343,-36.2408 33.97782,-36.2408 3.121,0 2.85012,1.03759 -0.83716,3.20692 -5.96395,3.5087 -12.13614,8.81654 -17.08214,14.69001 -6.71343,7.9723 -9.8339,12.77538 -13.3545,20.55538 -3.21024,7.09413 -5.23029,8.79883 -4.37749,3.69408 v 0 m 88.60364,-71.87592 c -0.62266,-1.62264 0.6258,-3.37357 4.53135,-6.35516 5.15186,-3.93304 10.20458,-5.88906 17.05235,-7.52207 11.75326,-2.8029 27.15922,-3.99903 27.40895,-1.77829 0.1063,0.94595 -3.07103,1.60067 -11.63296,2.397 -8.98872,0.83602 -14.69597,2.03766 -20.95563,4.41215 -5.09664,1.93329 -11.49993,5.62419 -14.16946,8.16732 -1.53638,1.46361 -1.89204,1.5717 -2.23461,0.67904 v 0\"\r\n          style={{fill: matsuriColors.EYES}} />\r\n        <motion.path\r\n          id=\"hair_ahoge\"\r\n          d=\"m 787.875,167.625 c 0,0 -18.82176,15.7584 -29.06249,39 -11.4834,26.06178 -7.4245,45.73856 -0.56251,52.875 14.06248,14.625 52.125,12.375 52.125,12.375 0,0 -22.99119,-17.31981 -28.12501,-40.875 -6.375,-29.25 5.62501,-63.375 5.62501,-63.375 0,0 0,0 0,0\"\r\n          animate={ahogeControl}\r\n          variants={ahogeVariants}\r\n          onMouseOver={() => ahogeControl.start('largeFlick').then(ahogeLoop)}\r\n          style={{fill: matsuriColors.HAIR, originX: '810px', originY: '270px'}} />\r\n\r\n      </motion.g>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion, useAnimation } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\n\r\nexport default function Body({ children }) {\r\n  const [ { matsuriColors } ] = useContext(ColorContext);\r\n  const bellyControl = useAnimation();\r\n\r\n  return (\r\n    <g>\r\n\r\n      <defs>\r\n\r\n        <path\r\n          id=\"skin_torso\"\r\n          d=\"m 923.42418,430.16267 c 0,0 29.78413,5.91673 54.42046,2.07584 25.17046,-3.92417 33.53036,-15.7422 53.03036,-14.99219 19.5,0.74999 16.8504,3.84077 30,4.62866 23.2012,1.39017 40.5,19.875 40.875,45.375 0.375,25.50002 -14.2349,50.2683 -51.5115,61.68359 -39.4689,12.08665 -99.22423,3.69833 -129.59924,-2.67667 -30.37499,-6.375 -66.38927,-20.3819 -70.13925,-37.25691 -3.75001,-16.87499 -4.5,-34.49999 13.12498,-44.625 17.625,-10.12499 59.7992,-14.21232 59.7992,-14.21232 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.SKIN}} />\r\n        <path\r\n          id=\"yellow_torso\"\r\n          d=\"m 874.51432,511.48616 c 0,0 6.89428,12.7279 32.61523,23.33452 25.72104,10.60659 71.85977,6.36395 91.74713,3.44716 19.88742,-2.91682 39.50962,-31.55465 40.03992,-47.19937 0.5303,-15.64475 -11.137,-41.1006 -29.6985,-43.22191 -18.56152,-2.12134 -3.4471,33.41078 -14.84922,45.87355 -11.40211,12.46275 -19.88739,11.66726 -37.91866,16.17506 -18.03121,4.50782 -27.0468,6.89431 -27.0468,6.89431 0,0 -8.22016,-5.83364 -27.31201,-8.22013 -19.09185,-2.38649 -27.57711,2.91682 -27.57711,2.91682 0,0 0,0 0,0 m 122.29826,-84.03069 c 0,0 6.79554,-11.20453 25.17054,-13.07954 18.375,-1.87498 30.3749,5.62501 39.3749,6.00001 9,0.375 18.375,-4.125 36,-1.50001 17.625,2.62502 27,14.62501 29.25,20.62502 2.25,5.99998 1.875,15.37498 1.875,15.37498 0,0 -22.125,14.62501 -22.125,17.625 0,3.00002 6.75,7.49999 10.875,15.375 4.125,7.87499 5.6251,17.25001 5.6251,17.25001 0,0 -6.0001,3.74998 -14.2501,5.62499 -8.2499,1.875 -18.9369,2.72489 -18.9369,2.72489 0,0 -1.5909,0.79549 -4.9055,2.51906 -3.3145,1.72358 -9.4133,4.11007 -9.4133,4.11007 0,0 23.0693,-19.62221 19.7548,-41.76349 -3.3146,-22.1413 -11.9325,-34.73663 -25.0581,-37.78603 -13.1257,-3.0494 -31.2181,-2.24694 -43.4871,-6.89428 -17.5009,-6.62913 -29.74934,-6.20569 -29.74934,-6.20569 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.YELLOW}} />\r\n\r\n        <clipPath id=\"skin_torso_clip\">\r\n          <use href=\"#skin_torso\" />\r\n        </clipPath>\r\n        \r\n        <clipPath id=\"yellow_torso_clip\">\r\n          <use href=\"#yellow_torso\" />\r\n        </clipPath>\r\n\r\n      </defs>\r\n\r\n      <motion.g\r\n        animate={bellyControl}\r\n        style={{scaleY: 1}}\r\n        onClick={() => bellyControl.start({scaleY: 1, transition: {type: 'spring', velocity: -2, stiffness: 150, damping: 3, mass: 0.5}})}>\r\n        <use href=\"#skin_torso\" />\r\n        <path\r\n          id=\"skin_torso_shadow\"\r\n          clipPath=\"url(#skin_torso_clip)\"\r\n          d=\"m 1094.4914,486.04912 c 0,0 -7.2701,11.19461 -25.9218,18.53493 -19.0755,7.50713 -44.9415,2.05696 -44.9415,2.05696 0,0 -14.41,43.02887 -14.41,43.02887 0,0 80.3451,-27.0468 80.3451,-27.0468 0,0 4.9282,-36.57396 4.9282,-36.57396\"\r\n          style={{fill: matsuriColors.SKIN_SHADOW}} />\r\n      </motion.g>\r\n\r\n      <use href=\"#yellow_torso\" />\r\n      <path\r\n        id=\"yellow_torso_shadow\"\r\n        clipPath=\"url(#yellow_torso_clip)\"\r\n        d=\"m 1047.4921,423.07617 c 0,0 1.5919,2.6513 6.0997,3.18163 4.5079,0.53033 10.0767,-1.32568 10.0767,-1.32568 0,0 -16.1763,-1.85596 -16.1763,-1.85596 m -1.1251,4.11035 c 0,0 0.3982,1.19307 3.315,1.5908 2.9169,0.39779 5.3042,-0.26504 5.3042,-0.26504 0,0 -2.52,-0.79534 -4.7739,-1.06053 -2.2539,-0.26504 -3.8453,-0.26504 -3.8453,-0.26504 0,0 0,0 0,0 m 81.4454,58.43846 c 0,0 -2.1976,3.21143 -8.0625,6.18752 -5.7656,2.92567 -9.75,2.06249 -9.75,2.06249 0,0 -0.6989,-2.2699 -1.875,-3.93749 -1.761,-2.49707 -2.25,-2.81251 -3.5625,-3.37501 -0.082,-0.0352 -0.1545,-0.0442 -0.2197,-0.0292 -0.9798,0.22167 -0.3428,5.91211 -5.9677,12.59181 -5.0568,6.00486 -13.3126,10.875 -13.3126,10.875 0,0 -12.3749,11.81248 -12.3749,11.81248 0,0 52.3125,-12.56247 52.3125,-12.56247 0,0 2.8124,-23.62499 2.8124,-23.62499 m -91.286,16.62891 c 0,0 -8.4929,14.1186 -39.26819,15.34864 -32.5671,1.30161 -34.60836,-4.40921 -34.60836,-4.40921 0,0 -62.64989,14.43163 -56.64991,24.18163 6.00001,9.74999 34.87501,14.62501 78.00001,9.74999 43.12505,-4.87497 52.52645,-44.87105 52.52645,-44.87105 0,0 0,0 0,0\"\r\n        style={{fill: matsuriColors.YELLOW_SHADOW}} />\r\n      <path\r\n        id=\"black_bottom\"\r\n        d=\"m 954.609,543.52706 c -1.70484,-0.68349 -4.07234,-0.15959 -9.04317,0.11339 -3.73448,0.20523 -6.14631,-0.37715 -6.14631,-3.00728 0,-1.52237 -0.92801,-1.95965 -2.48669,-2.30199 -2.43927,-0.53575 -4.79237,-0.4521 -4.79237,-2.16187 0,-0.80569 -0.45641,-1.31811 -1.17539,-1.31964 -0.64647,-10e-4 -2.19368,-0.62331 -3.43823,-1.38209 -2.20054,-1.34155 -2.81701,-0.54247 -2.52295,-4.08866 0,0 0.3024,-3.64663 0.3024,-3.64663 0,0 -2.59393,-1.35204 -2.59393,-1.35204 -1.65886,-0.86465 -3.89302,-1.35204 -6.19775,-1.35204 -3.27141,0 -3.7925,-0.21487 -5.64894,-2.32917 -2.03709,-2.32016 -2.06223,-2.32761 -6.45727,-1.91721 -3.7245,0.34781 -4.62668,0.21798 -5.78798,-0.83302 -0.92254,-0.83486 -2.19251,-1.1874 -3.85503,-1.07011 -1.36361,0.0961 -3.06408,-0.2554 -3.77884,-0.78157 -1.10976,-0.8168 -1.62156,-0.82193 -3.50461,-0.0352 -3.46635,1.44833 -5.98252,1.17323 -7.55512,-0.82602 -1.13071,-1.43748 -1.98465,-1.76766 -4.81538,-1.86197 -4.43035,-0.14769 -5.5904,-1.49635 -4.98311,-5.79385 0.70149,-4.96417 2.41965,-6.14514 9.49178,-6.52408 11.14279,-0.59703 36.46879,3.77544 45.83339,7.91306 0,0 2.94287,1.30028 2.94287,1.30028 0,0 5.17513,-1.63483 5.17513,-1.63483 10.04496,-3.17322 22.3672,-5.1438 34.27586,-5.48147 6.09528,-0.17291 12.52449,-0.60576 14.28712,-0.96205 4.41938,-0.89334 9.35524,-3.51887 11.58789,-6.16397 2.37654,-2.81557 5.68877,-9.76068 5.70144,-11.95489 0.0198,-3.52979 0.71459,-4.47576 4.40769,-6.00647 2.6243,-1.08774 4.7646,-2.73504 7.6626,-5.89776 0,0 4.0213,-4.38846 4.0213,-4.38846 0,0 1.3307,1.59769 1.3307,1.59769 2.0559,2.46832 1.6782,3.69544 -2.4681,8.01998 -4.2249,4.40637 -6.1899,8.9439 -4.9095,11.33646 1.9743,3.68898 -0.333,11.91112 -3.9203,13.96993 -1.4464,0.83013 -2.0841,1.80133 -2.3743,3.61613 -0.5513,3.44755 -3.62178,5.95363 -7.33647,5.98791 -2.4139,0.0227 -2.99075,0.3253 -4.15551,2.18288 -1.15089,1.83552 -1.80162,2.18611 -4.36575,2.3521 -1.6573,0.10715 -3.98395,0.64491 -5.17034,1.19466 -1.23406,0.57186 -2.87915,0.81836 -3.84449,0.57609 -1.09179,-0.27411 -2.75715,0.0944 -4.71807,1.04363 -3.25236,1.57442 -6.00863,1.44405 -8.95584,-0.42361 -1.40998,-0.89351 -1.71099,-0.83316 -3.54597,0.71084 -2.5357,2.13364 -5.67357,2.73169 -9.2624,1.76533 -3.64008,-0.98016 -4.65809,-0.34665 -2.73402,1.70141 1.24268,1.32276 1.60877,0.94918 1.26921,3.42649 -0.38616,2.81747 -0.50219,2.42436 1.22916,2.79369 1.00281,0.21402 3.40047,1.77041 4.64054,2.54217 1.80771,1.12499 2.75383,0.42239 2.49741,1.76372 -0.26249,1.37347 0.0553,1.83183 1.77523,2.56011 4.90235,2.07578 7.009,3.7938 3.14031,6.39471 -2.39508,1.61016 -6.41225,1.68378 -9.02792,0.63516 0,0 0,9e-5 0,9e-5 m 48.57462,-6.67375 c -0.9238,-0.83117 -1.7719,-2.26684 -1.8845,-3.19037 -0.1789,-1.46684 0.1772,-1.79342 2.8176,-2.58321 8.1139,-2.42708 10.9569,-3.77158 14.7464,-7.25338 4.9143,-4.51525 10.4824,-12.61361 13.0871,-20.27279 1.862,-4.97049 3.1794,-11.45724 3.1953,-16.11164 0,-6.67845 -1.112,-13.89538 -4.4075,-19.09083 -4.7821,-7.53905 -13.7233,-14.70662 -20.6664,-17.13251 -4.5822,-1.60104 -6.6853,-1.90871 -16.20882,-2.37129 -4.45671,-0.21657 -9.33599,-0.8456 -10.91441,-1.40732 -2.47825,-0.88191 -2.85454,-1.27542 -2.85454,-2.98514 0,-1.50097 0.51911,-2.28577 2.18288,-3.30021 2.59109,-1.5798 4.44186,-1.67298 7.53778,-0.37942 1.98068,0.82757 2.39627,0.82757 3.0831,0 1.07113,-1.29061 6.26238,-1.25461 7.34591,0.051 1.0811,1.30272 2.3273,1.27392 4.4277,-0.10233 1.6326,-1.06974 1.8014,-1.03394 4.6754,0.99181 2.5532,1.79974 3.2399,2.00341 4.78,1.41789 0.9891,-0.37604 2.6444,-0.49791 3.6785,-0.27071 2.1746,0.47764 5.2747,3.85061 5.2747,5.73897 0,0.99221 0.475,1.29178 2.0483,1.29178 4.0161,0 4.9265,2.57995 6.3163,6.92425 0.5312,1.66068 4.0226,2.51612 5.3154,3.05167 1.0488,0.43441 2.7718,1.6926 3.8289,2.79598 1.6087,1.67913 1.9226,2.57437 1.926,5.49235 0,2.99208 -0.8529,4.27671 0.7707,5.6573 1.6082,1.36743 1.8651,2.04231 1.7139,4.50156 -0.1162,1.88986 0.1897,3.31169 0.8818,4.10051 1.8315,2.08712 3.2432,5.43934 2.8241,6.70612 -0.8265,2.49783 -2.3299,5.5389 -2.9181,5.90236 -0.3382,0.20891 -0.1831,1.19027 0.3497,2.21142 1.4365,2.75374 1.1901,5.36661 -0.6827,7.23946 -0.9067,0.90672 -1.9083,1.6486 -2.2258,1.6486 -0.3174,0 -0.4502,1.75405 -0.2951,3.89786 0.2735,3.78388 0.2103,3.96065 -2.1634,6.04488 -1.345,1.18089 -3,2.14705 -3.678,2.14705 -0.9626,0 -1.3072,0.662 -1.5732,3.02207 -0.4161,3.69142 -1.3298,4.86298 -5.0299,6.44899 -1.5752,0.67524 -2.864,1.63911 -2.864,2.14197 0,2.47853 -5.9576,5.4309 -9.521,4.71821 -1.5268,-0.30535 -2.2287,-0.12387 -2.6869,0.69506 -0.4049,0.72351 -1.4971,1.1084 -3.1452,1.1084 -1.3887,0 -3.1116,0.44376 -3.8286,0.98612 -1.8447,1.39521 -3.3232,1.2596 -5.2594,-0.48237 0,0 0,0 0,0 m 61.9086,-13.09708 c -0.8575,-0.85751 2.0936,-1.5552 9.1187,-6.64311 4.677,-3.53117 10.0737,-9.14842 13.8374,-16.89494 3.4125,-7.02349 4.1292,-8.8954 4.0635,-20.66179 -0.04,-7.11887 -1.3195,-9.80104 -2.9377,-13.94646 -4.7739,-12.22957 -10.8768,-18.54782 -21.7294,-22.49592 -4.9843,-1.81327 -7.3627,-2.2426 -15.3046,-2.76276 -10.0789,-0.66013 -27.9442,-3.79874 -34.3602,-6.03643 -2.1583,-0.75277 -7.032,-2.76557 -10.5065,-3.50062 -6.7445,-1.42688 -10.53114,-1.14729 -14.87351,1.09823 -1.93076,0.99845 -1.98139,0.98306 -1.98139,-0.60216 0,-2.16133 3.95779,-5.59551 7.13577,-6.19169 4.25533,-0.79832 13.94903,0.99768 19.00163,2.78374 7.3226,2.58849 25.0025,5.74841 36.4684,6.51796 16.8992,1.13428 24.3681,3.90733 32.9302,12.22634 5.8441,5.67808 11.171,17.20429 12.387,26.80231 0.6468,5.10554 1.2828,7.92933 -0.3269,15.65073 -2.3131,11.09458 -5.1221,14.05531 -10.1254,21.23966 -5.1058,5.93762 -9.4171,8.97131 -12.6247,10.53442 -3.531,1.72071 -9.5382,3.51655 -10.1723,2.88249 0,0 0,0 0,0 m 32.1224,-15.63968 c 4.0874,-0.006 15.2115,-1.91667 18.4771,-3.3215 3.8496,-1.65611 4.016,-2.43456 1.8843,-8.82213 -2.0464,-6.13233 -4.0274,-9.1482 -10.0203,-15.25496 -4.8609,-4.95317 -5.3772,-5.73015 -5.3772,-8.09155 0,-1.95812 0.429,-3.28127 2.0626,-4.96145 4.7569,-5.15299 11.9138,-8.71532 15.6835,-11.27129 3.7697,-2.55594 5.3366,-3.45614 5.9148,-4.85544 0.5781,-1.39932 0.4981,-2.7428 0.1145,-5.12872 -0.3835,-2.38595 -1.0501,-6.35151 -2.925,-9.8689 -1.2342,-2.3154 -2.0474,-4.40637 -1.8072,-4.64661 0.8718,-0.8718 4.0429,1.53791 5.9096,4.49067 2.1805,3.44917 4.6,10.85261 4.6,14.07569 0,1.19727 -0.4951,3.22024 -1.1003,4.49549 -1.0988,2.31554 -7.9551,7.51314 -12.6382,10.50758 -4.1447,2.65011 -7.7545,6.44706 -7.7545,7.36702 0,0.3126 1.8475,2.71485 4.1054,5.33835 7.315,8.4992 10.8873,15.35956 11.5429,22.16738 0.3095,3.2154 0.132,4.19057 -1.093,6.0086 -2.1043,3.12248 -4.5338,4.28698 -12.9956,6.22896 -7.432,1.70563 -19.4198,2.05534 -22.3313,0.90156 2.7624,-1.51512 5.8449,-3.67957 7.7478,-5.35876 0,0 10e-5,0 10e-5,0\"\r\n        style={{fill: matsuriColors.BLACK}} />\r\n      \r\n      {children}\r\n\r\n      <path\r\n        id=\"black_top\"\r\n        d=\"m 955.91313,506.79533 c -0.30849,-0.30847 -0.35201,-2.57896 -0.0967,-5.04556 0.44473,-4.29684 0.60477,-4.61463 3.82096,-7.58716 2.86798,-2.65068 3.47204,-3.65769 4.14836,-6.91543 0.66889,-3.22209 1.33118,-4.34466 4.27363,-7.24377 1.91514,-1.88691 4.84217,-4.21248 6.50452,-5.1679 1.66235,-0.95545 3.47581,-2.10648 4.02993,-2.5579 1.7697,-1.4417 10.84779,-4.87071 18.47052,-6.97677 5.30815,-1.46653 8.86835,-2.04248 12.64525,-2.04562 4.9176,-0.003 5.3838,0.12246 7.2203,1.95891 1.5905,1.59055 1.9633,2.53942 1.9633,4.99776 0,1.66895 -0.8816,2.3701 -1.2046,2.56969 -0.3229,0.19956 -0.7762,0.44314 -1.7619,-0.47035 -2.6443,-2.45072 -4.4061,-2.63951 -13.4173,-1.43782 -12.34571,1.64636 -17.70628,3.93659 -27.37951,11.69748 -4.24655,3.40705 -4.73074,4.07231 -6.65955,9.15004 -1.65243,4.35019 -2.55158,5.785 -4.37397,6.97958 -2.02499,1.32744 -2.29394,1.84402 -2.29394,4.40649 0,2.3455 -0.29013,3.04342 -1.51121,3.63529 -1.73803,0.84243 -3.56658,0.8646 -4.37811,0.053 0,0 -3e-5,-3e-5 -3e-5,-3e-5\"\r\n        style={{fill: matsuriColors.BLACK}} />\r\n\r\n    </g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\nimport { SceneContext } from '../../scene';\r\n\r\nexport function LeftArm() {\r\n  const [ { rate, swing } ] = useContext(SceneContext);\r\n  const [ { matsuriColors } ] = useContext(ColorContext);\r\n  const armSwing = swing * 0.6;\r\n  const variants = {\r\n    arm: {rotate: [armSwing, -armSwing, armSwing], transition: {ease: 'easeInOut', duration: rate, delay: rate * 0.3, loop: Infinity}},\r\n  };\r\n  return (\r\n    <motion.path\r\n      variants={variants}\r\n      animate={['arm', `${rate}`]}\r\n      id=\"skin_arm_left\"\r\n      d=\"m 964.50001,449.625 c 0,0 4.31246,-15.00001 19.12499,-15.56252 13.30688,-0.5053 21,5.8125 25.125,13.68751 4.125,7.87499 5.25,34.5 5.25,52.125 0,17.625 -0.75,40.49997 -2.25,47.24997 -1.5,6.75003 -10.5,27 -18.00001,40.87502 -7.49999,13.875 -12.37499,25.125 -12.37499,25.125 0,0 3.5625,8.25001 3.93749,14.99998 0.375,6.75 -0.18737,12.75001 0,14.8125 0.18765,2.06252 4.125,4.68751 3.75001,7.31251 -0.37502,2.625 -5.62501,4.125 -8.43752,6.375 -2.81248,2.25 -1.3125,4.31249 -4.68748,5.24999 -3.37501,0.9375 -7.50002,-1.68749 -13.125,-6.18749 -5.62501,-4.5 -8.81249,-8.0625 -10.12501,-10.49998 -1.3125,-2.43751 -2.43748,-11.06252 -2.99999,-20.62502 -0.56251,-9.56248 -0.56251,-19.49998 0.18737,-23.24999 0.74999,-3.74998 8.24998,-26.0625 12.37499,-40.125 4.125,-14.06251 8.0625,-27.56251 8.0625,-27.56251 0,0 -1.12499,-16.31248 -3.74998,-34.31248 -3.632,-25.76197 -5.01392,-36.94967 -2.06234,-49.68749 v 0\"\r\n      style={{fill: matsuriColors.SKIN, originX: \"985px\", originY: \"450px\"}} />\r\n  );\r\n}\r\n\r\nexport function RightArm() {\r\n  const [ { rate } ] = useContext(SceneContext);\r\n  const [{ matsuriColors } ] = useContext(ColorContext);\r\n  const variants = {\r\n    arm: {rotate: [5, 1, 5], transition: {ease: 'easeInOut', duration: rate * 1.4, delay: rate * 0.2, loop: Infinity}},\r\n  };\r\n  return (\r\n    <g style={{transform: 'translateY(10px)'}}>\r\n      <motion.path\r\n        id=\"skin_arm_right\"\r\n        variants={variants}\r\n        animate={['arm', `${rate}`]}\r\n        d=\"m 879.01189,511.0798 c 0,0 0.30637,9.54471 1.37962,12.45691 1.0732,2.91217 4.25976,3.95912 5.32843,5.81068 1.06866,1.85156 3.07823,5.06112 5.20866,7.17324 2.13052,2.11218 13.04751,1.68724 14.90817,2.73991 1.86075,1.05262 7.56692,7.29366 12.02434,5.56654 3.18838,-1.23542 3.03449,-7.26565 2.47901,-13.09694 -0.55565,-5.83129 -2.16292,-19.58372 -4.84313,-26.20134 -2.6803,-6.61762 -7.4179,-16.97168 -10.07637,-18.55123 -2.65853,-1.57952 -22.65508,-15.7773 -53.70083,-20.68152 -31.0458,-4.90422 -51.67967,-5.52251 -58.8208,-1.249 -7.14107,4.27348 -10.54698,13.8342 -9.72286,20.45985 0.82392,6.62564 4.05751,18.54422 19.99015,23.77882 15.93264,5.2346 25.19269,0.42163 41.63168,0.0856 16.43896,-0.3361 34.21395,1.70855 34.21395,1.70855 0,0 0,0 0,0\"\r\n        style={{fill: matsuriColors.SKIN, originX: '805px', originY: '480px'}} />\r\n      <path\r\n        id=\"hair_side_right\"\r\n        d=\"m 832.875,461.51515 c 0,0 -7.36744,-5.52458 -13.92993,-3.27458 -6.56249,2.25 -14.32766,6.39774 -16.39015,18.21025 -2.06252,11.81251 12.13257,22.67419 12.13257,22.67419 0,0 -5.06251,-13.125 -0.18737,-24.375 4.875,-11.25 10.71967,-13.98484 10.71967,-13.98484 0,0 7.65522,0.74999 7.65522,0.74999\"\r\n        style={{fill: matsuriColors.HAIR}} />\r\n    </g>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\nimport { SceneContext } from '../../scene';\r\n\r\nexport default function Leg() {\r\n  const [ { rate, swing } ] = useContext(SceneContext);\r\n  const [ { matsuriColors } ] = useContext(ColorContext);\r\n  const legSwing = swing * 0.6;\r\n  const variants = {\r\n    leg: {rotate: [legSwing, -legSwing, legSwing], transition: {ease: 'easeInOut', duration: rate * 1.7, loop: Infinity}},\r\n  };\r\n  return (\r\n    <motion.g\r\n      variants={variants}\r\n      animate={['leg', `r${rate}s${swing}`]}\r\n      style={{originX: '1110px', originY: '485px'}}>\r\n\r\n      <defs>\r\n\r\n        <path\r\n          id=\"skin_leg\"\r\n          d=\"m 1056.6678,520.056 c 0,0 1.2874,18.78452 5.7853,44.22138 4.498,25.43683 7.9451,41.38206 12.4335,47.39661 4.4884,6.01455 17.6298,13.70812 42.2876,22.31198 24.6578,8.6038 58.9861,11.88476 58.9861,11.88476 0,0 11.0792,-4.37508 14.3439,-13.15928 3.2646,-8.78417 -5.7279,-30.65652 -5.7279,-30.65652 0,0 -15.3013,-4.85433 -30.6006,-12.90166 -15.2993,-8.04736 -25.5995,-16.77413 -26.2133,-20.98049 -0.6141,-4.20636 1.6039,-28.8682 4.6322,-46.9453 3.0284,-18.0771 7.376,-33.07048 5.0754,-51.23906 -2.3005,-18.1686 -10.4627,-29.99894 -18.9588,-36.21424 -8.496,-6.21527 -29.7184,-15.10316 -47.297,-5.66748 -17.5785,9.43571 -14.7464,91.9493 -14.7464,91.9493 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.SKIN}} />\r\n        <path\r\n          id=\"yellow_sock\"\r\n          d=\"m 1154.8724,586.79436 c 0,0 8.1543,7.60385 8.473,20.55917 0.3188,12.95529 -2.5686,23.54176 -11.5887,30.49625 -9.02,6.95449 -14.9533,8.00955 -14.9533,8.00955 0,0 1.2898,4.22059 3.2666,5.37412 1.9767,1.1535 7.3271,-1.13372 14.2348,-2.12117 6.9948,-0.99986 16.9231,1.33503 19.4772,2.93888 2.2059,1.38523 4.6478,10.30887 7.3243,13.09782 2.6764,2.78889 6.6904,8.10116 16.2218,5.05531 9.5314,-3.04583 14.2058,-7.94772 15.4858,-12.9452 1.28,-4.99748 -1.4666,-20.00968 -4.6345,-33.29382 -3.168,-13.28409 -8.5798,-24.12499 -13.6082,-25.77872 -5.0284,-1.65373 -8.7808,-0.0377 -14.0596,-1.65949 -6.9304,-1.38824 -11.7863,-1.47121 -14.1045,-4.47789 -2.3181,-3.00671 -3.2959,-8.00563 -6.5035,-8.11667 -3.2075,-0.11112 -5.0312,2.86186 -5.0312,2.86186 0,0 0,0 0,0\"\r\n          style={{fill: matsuriColors.YELLOW}} />\r\n\r\n        <clipPath id=\"skin_leg_clip\">\r\n          <use href=\"#skin_leg\" />\r\n        </clipPath>\r\n        <clipPath id=\"yellow_sock_clip\">\r\n          <use href=\"#yellow_sock\" />\r\n        </clipPath>\r\n\r\n      </defs>\r\n\r\n      <path\r\n        id=\"yellow_sock_back\"\r\n        d=\"m 1140.9926,651.43701 c 0,0 -8.2103,0.39903 -13.4676,-8.57322 -5.2573,-8.97228 6.527,-53.03078 18.7377,-57.80327 12.2107,-4.77252 14.7775,-1.03397 14.7775,-1.03397 0,0 12.9916,16.04645 6.0184,36.37774 -6.9732,20.33133 -26.066,31.0326 -26.066,31.0326 0,0 0,1.1e-4 0,1.1e-4\"\r\n        style={{fill: matsuriColors.YELLOW_SHADOW}} />\r\n      <use href=\"#skin_leg\" />\r\n      <path\r\n        id=\"skin_leg_shadow\"\r\n        clipPath=\"url(#skin_leg_clip)\"\r\n        d=\"m 1043.3027,520.08985 c 0,0 22.9993,70.30239 22.5132,60.23435 -0.932,-19.30377 0.1503,-33.33124 12.857,-49.94529 11.5504,-15.10211 29.4994,-17.19235 40.7871,-28.44142 11.2877,-11.24906 -9.6724,-18.36034 -9.6724,-18.36034 0,0 -66.4849,36.5127 -66.4849,36.5127 m 96.3223,31.53515 c 0,0 12.0832,26.625 16.5644,39.37499 4.3164,12.28102 6.246,26.22336 -9.6782,36.85986 -15.9005,10.62068 -34.579,4.2539 -34.579,4.2539 0,0 15.8861,20.63234 15.8861,20.63234 0,0 28.3067,-5.49609 40.6817,-23.1211 12.375,-17.625 4.125,-41.62499 4.125,-41.62499 0,0 -33,-36.375 -33,-36.375\"\r\n        style={{fill: matsuriColors.SKIN_SHADOW}} />\r\n      <use href=\"#yellow_sock\" />\r\n      <path\r\n        id=\"yellow_sock_shadow\"\r\n        clipPath=\"url(#yellow_sock_clip)\"\r\n        d=\"m 1141.5622,651.64861 c 0,0 6.2967,0.97432 15.5992,-5.36219 6.2659,-4.26798 7.344,-7.63957 8.887,-9.26969 2.5095,-2.65181 6.2368,9.18283 2.8979,17.08038 -3.3591,7.94588 7.4622,4.07075 10.3791,8.57854 2.9168,4.5078 14.4651,2.40885 21.0979,-1.72468 9.2709,-5.77814 11.8736,-12.74681 10.5156,-22.22059 -0.8727,-6.08825 4.114,-12.20862 4.114,-12.20862 0,0 12.5357,40.0409 12.5357,40.0409 0,0 -51.3165,15.69022 -51.3165,15.69022 0,0 -34.7099,-30.60428 -34.7099,-30.60428\"\r\n        style={{fill: matsuriColors.YELLOW_SHADOW}} />\r\n\r\n    </motion.g>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport Head from './matsuri/head';\r\nimport Body from './matsuri/body';\r\nimport { RightArm, LeftArm } from './matsuri/arms';\r\nimport Leg from './matsuri/leg'\r\n\r\nexport default function Matsuri() {\r\n  return (\r\n    <motion.g id=\"matsuri\">\r\n      <Leg />\r\n      <Body>\r\n        <LeftArm />\r\n        <Head />\r\n      </Body>\r\n      <RightArm />\r\n    </motion.g>\r\n  )\r\n}","import React, { useContext } from 'react';\r\nimport { motion, useAnimation } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\n\r\n\r\nexport default function Upper() {\r\n  const [ { ebifrionColors } ] = useContext(ColorContext);\r\n  const mouthControl = useAnimation();\r\n  return (\r\n    <g style={{transform: 'translate(15px, 20px)'}}>\r\n      \r\n      <defs>\r\n\r\n        <path\r\n          id=\"ebifrion_mane\"\r\n          d=\"m 719.25001,773.24998 c 0,0 9.74999,18.74999 25.49999,24.00001 15.75,5.24999 37.99981,3.85829 50.99998-11.25 13.875-16.12502 11.625-27.75002 11.625-27.75002 0,0 11.99999,13.87502 37.12499,11.62502 25.12502-2.25 37.87503-23.24999 40.12503-40.125 2.25-16.87499 -4.00737-30.8787 -4.00737-30.8787 0,0 18.98402-1.3388 34.34468-14.99998 16.125-14.34101 21.27297-36.59465 11.18565-58.15162 -8.24326-17.61619 -23.76927-25.125 -23.76927-25.125 0,0 15.15455-7.98491 18.55698-29.25003 2.99999-18.74999 -2.15904-39.15533 -19.40902-50.03033 -18.88739-11.90727 -36.90536-7.43562 -36.90536-7.43562 0,0 9.0942-15.37523 -2.25-37.93938 -9.91667-19.72474 -28.37132-28.93935 -51.62131-26.31433 -23.24999,2.625 -31.59099,18.93197 -31.59099,18.93197 0,0 -0.85462-19.77874 -27.65903-30.557 -23.0078-9.2516 -47.00367,1.71969 -56.75369,16.71968 -9.41434,14.48362 -8.06797,27.74999 -8.06797,27.74999 0,0 -19.6592-8.95292 -38.83365-5.87129 -21.00002,3.37499 -37.03399,20.99999 -37.78398,43.87501 -0.6514,19.86783 9.40161,32.1213 9.40161,32.1213 0,0 -20.57423,1.9025 -35.01927,19.74634 -12.75001,15.74997 -14.25002,39.19297 -0.74999,56.44298 11.28447,14.41908 23.43197,17.716 23.43197,17.716 0,0 -10.875,4.125 -15.75003,25.87499 -4.875,21.75001 5.62501,43.50005 24.00001,51.00004 18.375,7.49999 29.25,2.99999 29.25,2.99999 0,0 -9.3903,17.34758 -2.625,36.375 6.00001,16.87499 20.25,27.375 44.25001,27 24.00001-0.375 33.00001-16.50002 33.00001-16.50002 0,0 0,0 0,0\"\r\n          style={{fill: ebifrionColors.MANE}} />\r\n        <path\r\n          id=\"ebifrion_face\"\r\n          d=\"m 861.25428,639.0652 c -12.6798,66.01224 -74.95665,109.53785 -139.09927,97.21718 -64.14259-12.32067 -105.86146-75.82204 -93.18166-141.83427 6.08905-31.70018 24.1649-59.75167 50.25107-77.98343 26.08617-18.23176 58.04583-25.15034 88.8482-19.23375 30.80237,5.91659 57.92428,24.18372 75.39925,50.78279 17.47494,26.5991 23.87146,59.3513 17.78241,91.05148 0,0 0,0 0,0\"\r\n          style={{fill: ebifrionColors.SKIN}} />\r\n\r\n        <clipPath id=\"ebifrion_mane_clip\">\r\n          <use href=\"#ebifrion_mane\" />\r\n        </clipPath>\r\n        <clipPath id=\"ebifrion_face_clip\">\r\n          <use href=\"#ebifrion_face\" />\r\n        </clipPath>\r\n\r\n      </defs>\r\n\r\n      <use href=\"#ebifrion_mane\" />\r\n      <path\r\n        id=\"ebifrion_mane_shadow\"\r\n        clipPath=\"url(#ebifrion_mane_clip)\"\r\n        d=\"m 653.82163,715.86079 c 0,0 -15.65918,38.46626 11.40987,52.85103 25.97698,13.8045 49.85104-11.66726 49.85104-11.66726 0,0 18.89751,25.94769 48.44205,19.20951 30.2288-6.89426 34.28946-34.58906 34.28946-34.58906 0,0 33.40604,14.09343 56.83629-7.46235 26.51644-24.39516 7.57993-55.86661 7.57993-55.86661 0,0 36.00794,2.65484 46.04777-27.17549 11.4584-34.04551 -19.77755-55.86667 -19.77755-55.86667 0,0 14.74537,0.05669 27.57713-24.92552 7.89256-15.36599 -1.06061-33.94111 -1.06061-33.94111 0,0 109.77831,127.27922 25.98613,224.32961 -83.79215,97.05044 -190.38847,137.88584 -284.78724,67.35195 -94.39877-70.53389 -62.04864-125.88126 -62.04864-125.88126 0,0 8.27751,14.33455 24.89888,16.78859 19.74404,2.91506 34.75548-3.15536 34.75548-3.15536 0,0 0,0 0,0\"\r\n        style={{fill: ebifrionColors.MANE_SHADOW}} />\r\n      <use href=\"#ebifrion_face\" />\r\n      <path\r\n        id=\"ebifrion_ears\"\r\n        d=\"m 662.13133,503.06102 c -13.99158-0.16469 -23.83875,9.9678 -23.29101,24.06444 0.50094,12.89378 9.43654,21.73535 9.43654,21.73535 0,0 36.23437-35.46386 36.23437-35.46386 0,0 -6.24526-9.42168 -21.0132-10.28758 -0.45975-0.02551 -0.91534-0.04309 -1.3667-0.04819 0,0 0-0.00006 0-0.00006 m 192.93151,28.19974 c -12.79987-2.11133 -23.57257,4.63595 -23.57257,4.63595 0,0 27.31161,45.87364 27.31161,45.87364 0,0 12.39165-9.98561 15.37974-22.53835 2.95055-13.78854 -5.56659-25.71503 -19.11878-27.97123 0,0 0,0 0,0\"\r\n        style={{fill: ebifrionColors.SKIN}} />\r\n      <path\r\n        id=\"ebifrion_face_shadow\"\r\n        clipPath=\"url(#ebifrion_face_clip)\"\r\n        d=\"m 637.124,674.84341 c 0,0 30.75914,36.06245 77.42818,39.24445 46.6691,3.18197 88.56513-20.15257 112.42996-58.33636 23.86485-38.18375 21.21324-95.98972 0.53036-127.80952 -20.68282-31.8198 20.15257-36.59278 20.15257-36.59278 0,0 51.44204,127.80955 51.44204,127.80955 0,0 -61.5183,123.03658 -61.5183,123.03658 0,0 -158.56872,21.74355 -158.56872,21.74355 0,0 -41.89609-89.09546 -41.89609-89.09546\"\r\n        style={{fill: ebifrionColors.SKIN_SHADOW}} />\r\n      <motion.g\r\n        animate={mouthControl}\r\n        onMouseOver={() => mouthControl.start({y: 0, transition: {type: 'spring', velocity: -70, stiffness: 180, damping: 5}})}>\r\n        <path\r\n          id=\"ebifrion_mouth\"\r\n          d=\"m 699.60203,628.46923 c -0.2571,0.00283 -0.52002,0.01417 -0.78953,0.0309 -8.625,0.56251 -20.43748,8.625 -20.81251,20.625 -0.375,12.00002 11.06252,19.12501 20.43751,16.125 5.33869-1.70838 7.99761-5.05806 9.3706-8.49172 0.43081,4.37213 2.24997,9.47812 8.71727,12.49807 8.91884,4.16472 21.16704-1.45264 22.31685-13.40334 1.1499-11.95064 -9.54522-21.44585 -18.02925-23.09763 -6.64713-1.29416 -9.9917,2.66743 -11.14308,4.45898 0.00232-0.55196 0.01701-1.96435 0.01701-1.96435 0,0 -2.11207-6.86324 -10.08547-6.78076 0,0 0,0 0,0\"\r\n          style={{fill: ebifrionColors.MOUTH}} />\r\n        <path\r\n          id=\"ebifrion_nose\"\r\n          d=\"m 710.625,637.125 c 0,0 -6.375-3.5625 -6.56252-6.375 -0.18737-2.81251 3.37501-2.99999 7.31254-2.81248 3.93749,0.18737 7.16828,1.51489 6.37498,3.74998 -1.02722,2.89417 -7.125,5.4375 -7.125,5.4375 0,0 0,0 0,0\"\r\n          style={{fill: ebifrionColors.FEATURES}} />\r\n      </motion.g>\r\n      <path\r\n        id=\"ebifrion_eyes\"\r\n        d=\"m 682.85449,605.57372 c 0,0 -11.89012-0.30064 -25.94387,3.14649 -14.05375,3.44713 -22.33885,9.10253 -22.33885,9.10253 0,0 -0.61203,2.67361 0.10998,6.86282 0.82755,4.80515 2.16797,7.66993 2.16797,7.6699 0,0 4.50711-3.18118 20.41699-7.42382 15.9099-4.24264 25.72118-4.24363 25.72118-4.24363 0,0 0.42041-3.71146 0.42041-7.9541 0.05556-2.67398 -0.1148-4.53025 -0.55369-7.16017 0,0 0,0 0,0 m 64.3447,6.74416 c -1.07527,2.94574 -3.64776,8.3325 -4.29194,14.11084 0,0 6.73072,1.29419 20.88425,9.34129 14.15347,8.04708 24.16847,17.16945 24.16847,17.16945 0,0 2.81256-3.10192 4.95111-6.31641 2.31511-3.47975 4.22612-8.19873 4.22612-8.19873 0,0 -9.65027-8.36768 -24.55373-16.42382 -14.90349-8.05618 -25.38428-9.68261 -25.38428-9.68261 0,0 0,0 0,0\"\r\n        style={{fill: ebifrionColors.FEATURES}} />\r\n      <path\r\n        id=\"ebifrion_blush\"\r\n        d=\"m 640.17771,634.86621 c -5.70688,0.05783 -9.85144,2.12145 -10.9995,5.47705 -1.8614,5.44402 4.57951,12.60045 14.38625,15.98437 9.80649,3.38391 19.26541,1.7142 21.12744-3.72949 1.8614-5.44402 -4.57951-12.60045 -14.38625-15.98437 -3.40149-1.17363 -6.91685-1.78019 -10.12793-1.74756 0,0 0,0 0,0 m 136.20847,19.43847 c -10.55497-0.23074 -19.01197,4.1112 -19.36956,9.94482 -0.37536,6.13933 8.3262,11.66672 19.43549,12.3457 11.10841,0.67864 20.41764-3.7474 20.79346-9.88622 0.37536-6.13933 -8.3262-11.66669 -19.43549-12.3457 -0.47455-0.02891 -0.94944-0.04847 -1.4239-0.05868 0,0 0-0.00003 0-0.00003\"\r\n        style={{fill: ebifrionColors.BLUSH}} />\r\n    \r\n    </g>\r\n  );\r\n}","import React, { useContext, useEffect } from 'react';\r\nimport { motion, useAnimation } from 'framer-motion';\r\nimport { ColorContext } from '../../colorscheme';\r\nimport { SceneContext } from '../../scene';\r\n\r\n\r\nexport default function Lower() {\r\n  const [ { rate } ] = useContext(SceneContext);\r\n  const [ { ebifrionColors } ] = useContext(ColorContext);\r\n  const legSwingSpan = 10;\r\n  const tailVariants = {\r\n    largeFlick: {\r\n      rotate: 0,\r\n      transition: {type: 'spring', velocity: 60, stiffness: 100, damping: 5, mass: 1},\r\n    },\r\n    smallFlick: {\r\n      rotate: 0,\r\n      transition: {type: 'spring', velocity: 40, stiffness: 100, damping: 5, mass: 1, delay: rate * 2.1},\r\n    },\r\n  }\r\n  const tailControls = useAnimation();\r\n  const tailLoop = () => { tailControls.start('smallFlick').then(tailLoop) };\r\n  useEffect(tailLoop, [tailControls, rate]);\r\n  const legVariants = {\r\n    bottom: {rotate: [-legSwingSpan - 10, legSwingSpan - 10, -legSwingSpan - 10], transition: {ease: 'easeInOut', duration: rate, loop: Infinity}},\r\n    topFront: {rotate: [-legSwingSpan, legSwingSpan, -legSwingSpan], transition: {ease: 'easeInOut', duration: rate, loop: Infinity}},\r\n    topBack: {rotate: [legSwingSpan, -legSwingSpan, legSwingSpan], transition: {ease: 'easeInOut', duration: rate, loop: Infinity}},\r\n  };\r\n  return (\r\n    <g>\r\n      <defs>\r\n\r\n        <path\r\n          id=\"ebifrion_tail_red\"\r\n          d=\"m 1123.87499,415.12499 c 0,0 -31.12498-30.37499 -34.87499-76.875 -3.75001-46.49998 7.87499-81 16.49999-84.74999 8.625-3.75 31.125,4.125 53.25001,24.74999 22.125,20.62501 31.5,44.62499 31.5,44.62499 0,0 17.25001-26.24998 39.37499-41.24999 22.125-14.99999 58.5-23.25 67.125-18 8.625,5.25001 21.00002,55.12502 -2.625,103.12501 -23.62499,47.99999 -67.5,65.25 -67.5,65.25 0,0 -102.75001-16.87501 -102.75001-16.87501\"\r\n          style={{fill: ebifrionColors.TAIL}} />\r\n        <path\r\n          id=\"ebifrion_body\"\r\n          d=\"m 872.24647,814.1561 c -2.43916-1.01835 -5.37197-2.51884 -6.5173-3.33437 0,0 -2.08244-1.48286 -2.08244-1.48286 0,0 -3.61182,2.03839 -3.61182,2.03839 -4.35875,2.45993 -4.89144,2.47915 -11.22463,0.40473 -4.7219-1.54667 -5.1844-1.58247 -8.68113-0.67164 -4.95507,1.29059 -5.5008,1.24002 -8.48767-0.78693 0,0 -2.5772-1.74892 -2.5772-1.74892 0,0 -5.07263,2.39318 -5.07263,2.39318 -2.78997,1.31624 -5.75952,2.57916 -6.599,2.80644 -2.88448,0.78109 -5.74345-0.47069 -9.70452-4.24896 0,0 -3.90353-3.72331 -3.90353-3.72331 0,0 -3.39846,0.78449 -3.39846,0.78449 -1.86914,0.4314 -5.0106,0.78443 -6.981,0.78443 -3.186,0 -3.97222-0.30801 -7.1028-2.7826 -11.15833-8.82017 -18.85416-18.58224 -30.86668-39.15397 -14.75019-25.26012 -24.38595-49.31433 -32.57243-81.31224 -5.45924-21.33816 -6.27151-33.41597 -3.72662-55.41157 2.82929-24.45372 8.2637-40.77255 20.98335-63.01032 11.1026-19.41069 21.93131-30.38238 38.16386-38.66771 7.85322-4.00839 13.6819-6.09452 20.56978-7.36209 0,0 4.61733-0.84971 4.61733-0.84971 0,0 0.35807-3.52735 0.35807-3.52735 0.20665-2.03505 0.77491-3.791 1.34331-4.15052 1.31876-0.83407 4.79296-0.80354 8.27274,0.07257 2.75159,0.69287 3.03557,0.60418 8.65383-2.70255 5.89221-3.46796 10.42566-5.40201 12.66231-5.40201 0.67802,0 2.89712,1.35564 4.93135,3.01255 3.41892,2.78473 3.72864-1.89133 6.38728-2.24473 2.68509-0.35688 3.04849-0.20409 5.47027,2.29833 0,0 2.59413,2.68061 2.59413,2.68061 0,0 4.63768-2.22256 4.63768-2.22256 2.60478-1.24832 5.21796-2.07077 5.96154-1.87634 0.72816,0.19049 2.67163,1.53252 4.31881,2.98244 0,0 2.99489,2.63622 2.99489,2.63622 0,0 4.1997-3.38414 4.1997-3.38414 5.47736-4.41374 6.70975-1.0931 13.27717,2.956 0,0 4.80932,2.96515 4.80932,2.96515 0,0 3.27688-1.74736 3.27688-1.74736 0,0 3.27688-1.74733 3.27688-1.74733 0,0 2.62939,1.38671 2.62939,1.38671 1.44618,0.76272 3.56944,1.93388 4.71838,2.60263 0,0 2.08899,1.21586 2.08899,1.21586 0,0 2.59773-2.14126 2.59773-2.14126 2.98823-2.46317 3.5519-2.54061 7.5045-1.0311 0,0 2.90699,1.11019 2.90699,1.11019 0,0 2.18486-2.11768 2.18486-2.11768 1.20169-1.1647 2.67265-2.11765 3.2688-2.11765 0.59615,0 3.51967,1.14695 6.57777,2.35148 0,0 5.49388,2.35148 5.49388,2.35148 0,0 1.74186-1.37015 1.74186-1.37015 1.21484-0.95562 2.29292-1.24914 3.56306-0.97019 1.58321,0.34775 2.07369,0.02551 3.7531-2.47649 1.63287-2.4313 2.77234-2.58197 5.31442-3.02134 2.1865-0.37791 4.22952,0.34537 6.48513,1.15132 0,0 3.1026,1.10866 3.1026,1.10866 0,0 2.44681-1.86627 2.44681-1.86627 2.34108-1.78563 2.67137-1.84714 7.64388-1.42347 0,0 5.1971,0.44277 5.1971,0.44277 0,0 1.20019-2.13355 1.20019-2.13355 0,0 1.20019-2.13355 1.20019-2.13355 0,0 5.18054,0.42517 5.18054,0.42517 2.84927,0.23386 5.8576,0.61449 6.68514,0.84591 1.1626,0.32508 1.92594-0.08362 3.35826-1.79799 4.75217-5.68803 5.21413-5.43186 9.03969-5.43186 3.56907,0 3.60488-0.01984 4.92117-2.83671 1.02909-2.20164 1.82347-2.96008 3.54832-3.38774 1.23993-0.30739 3.46683-1.83512 5.03742-3.45577 2.10455-2.17168 3.70497-3.12863 6.34122-3.79165 2.66902-0.67124 3.52619-1.18993 3.52619-2.13369 0-1.89641 2.90801-4.39875 5.72627-4.92746 1.38492-0.25994 3.91221-0.14542 5.6162,0.25427 2.92076,0.68502 3.16939,0.63156 4.34324-0.93421 2.17514-2.9014 4.87259-3.85067 9.57365-3.36903 3.87045,0.39654 4.22909,0.32017 4.64462-0.98912 0.54283-1.71031 5.18414-3.94651 8.23354-3.96692 1.21218-0.0085 2.30437-0.39254 2.42705-0.85431 1.25391-4.71895 1.336-4.80699 6.09843-6.54242 3.73802-1.36216 4.73905-2.0283 5.05426-3.36353 0.51934-2.2 4.07937-4.5269 7.77348-5.08088 1.81474-0.27213 2.97323-0.79639 2.97323-1.34549 0-3.39576 2.81188-5.34875 8.39072-5.82766 1.41905-0.12189 2.26012-0.69693 2.8607-1.95608 0.46794-0.98093 1.76363-2.10175 2.87932-2.49069 1.73852-0.60602 1.96716-0.95204 1.59894-2.41923 -0.57722-2.29978 1.00522-4.57722 4.67453-6.72758 0,0 2.95118-1.7295 2.95118-1.7295 0,0 -0.67258-2.64988 -0.67258-2.64988 -0.97512-3.84151 -0.31487-5.45051 4.05975-9.89357 7.02068-7.13055 12.31662-8.42389 19.36928-4.73014 0,0 3.18022,1.66564 3.18022,1.66564 0,0 4.00346-2.58755 4.00346-2.58755 4.27476-2.7629 7.53242-3.30418 10.83373-1.8 1.40377,0.63961 2.1712,0.57651 4.08436-0.33582 3.94469-1.8811 6.64515-1.48354 9.88132,1.45471 1.5618,1.41797 3.81986,3.14427 5.01795,3.83624 2.17568,1.25663 2.18288,1.25592 5.89181-0.56313 2.04245-1.00171 4.1849-1.82129 4.76104-1.82129 0.57614,0 2.76131,1.00443 4.85595,2.23206 3.49736,2.04976 3.97284,2.16196 5.82202,1.37361 4.61052-1.96549 10.5139-0.51531 13.18757,3.23949 1.27862,1.79561 1.65334,1.9366 4.06485,1.52918 5.17221-0.87384 7.27288-0.55508 9.33004,1.41576 1.07042,1.02552 2.12275,2.4209 2.33858,3.10088 0.21572,0.67997 1.56481,1.83447 2.99778,2.56552 3.3501,1.70904 4.22532,4.45292 3.22744,10.11784 0,0 -0.70288,3.99033 -0.70288,3.99033 0,0 2.47808,2.74294 2.47808,2.74294 2.37753,2.63163 2.45934,2.88349 2.01705,6.20688 -0.25342,1.90519 -1.32236,6.16592 -2.37518,9.46831 0,0 -1.91424,6.00435 -1.91424,6.00435 0,0 3.73428,4.37437 3.73428,4.37437 3.32994,3.90076 3.69927,4.63232 3.41127,6.75711 -0.26135,1.92702 -1.68208,5.79841 -2.99772,8.16778 -0.12586,0.22649 0.66762,0.78301 1.76309,1.23676 2.77702,1.15027 4.11497,2.82365 5.52787,6.9135 1.59812,4.62597 1.58374,8.99447 -0.04025,12.17934 0,0 -1.30255,2.55489 -1.30255,2.55489 0,0 1.97419,2.72531 1.97419,2.72531 1.09219,1.50769 1.97422,3.586 1.97422,4.65174 0,1.05951 -1.8112,5.41134 -4.02483,9.67068 0,0 -4.02477,7.74428 -4.02477,7.74428 0,0 1.67397,3.3035 1.67397,3.3035 2.62831,5.18666 2.21244,7.34539 -2.57837,13.38287 -2.27543,2.86767 -2.32795,3.05683 -1.36519,4.91854 1.08768,2.10339 0.78551,4.8289 -0.90116,8.12803 -0.91023,1.78047 -0.84923,2.22375 0.81641,5.93527 2.96643,6.61008 1.67624,9.29171 -6.86024,14.25926 -2.29175,1.33364 -4.34815,2.71817 -4.56979,3.07672 -0.22167,0.35858 0.11395,2.29144 0.7456,4.29531 1.28151,4.06556 0.79994,6.25161 -2.14957,9.75685 -1.46959,1.74654 -1.48161,1.88708 -0.47183,5.51489 0.95434,3.42893 0.94513,3.91436 -0.11679,6.15231 -0.63411,1.33631 -3.80103,4.94311 -7.0376,8.01513 -5.76153,5.4686 -5.89479,5.66612 -6.36582,9.43622 -0.57835,4.62906 -2.55416,7.29734 -6.21992,8.39974 -2.37963,0.71563 -2.64251,1.05695 -3.76087,4.88237 -1.36817,4.68003 -3.47973,6.99259 -8.55536,9.36986 0,0 -3.27849,1.53558 -3.27849,1.53558 0,0 -0.19843,3.76152 -0.19843,3.76152 0,0 -0.19843,3.76149 -0.19843,3.76149 0,0 -4.53368,3.00665 -4.53368,3.00665 -4.28165,2.83946 -4.53368,3.14929 -4.53368,5.57323 0,2.75477 -1.45964,4.57773 -5.82608,7.27634 -2.0175,1.2469 -2.23379,1.68596 -2.23379,4.53461 0,1.73475 -0.45706,3.80662 -1.01574,4.6042 -0.55862,0.79758 -3.42995,2.73651 -6.38073,4.30875 -4.2478,2.26335 -5.36499,3.17058 -5.36499,4.35685 0,1.85315 -2.65209,5.08524 -5.73741,6.99208 -2.19764,1.35819 -2.32245,1.63576 -2.32245,5.16464 0,4.82247 -1.17224,8.65602 -3.0164,9.86434 -0.80637,0.52835 -3.39474,1.52861 -5.75192,2.22279 -4.25472,1.253 -4.29585,1.28869 -5.67924,4.92579 -1.44924,3.8103 -2.46121,4.4858 -8.47091,5.65449 -1.30912,0.25455 -1.86613,0.86649 -2.16952,2.38337 -0.2245,1.12246 -1.13363,2.76627 -2.02028,3.65292 -1.77928,1.77934 -7.50056,3.72682 -10.94851,3.72682 -1.90052,0 -2.40593,0.37389 -3.55782,2.63169 -0.93152,1.82594 -2.16958,2.99656 -4.04359,3.82337 -1.48555,0.65543 -2.70099,1.42441 -2.70099,1.70889 0,0.28446 -0.63921,2.22557 -1.42041,4.31359 -2.02422,5.41029 -3.15383,6.32883 -7.78286,6.32883 -3.29207,0 -4.11761,0.27043 -5.87699,1.92518 -2.0503,1.92835 -6.6077,3.44806 -10.34011,3.44806 -1.70955,0 -2.28095,0.51684 -4.06361,3.67551 -2.60164,4.60984 -4.34645,5.75569 -9.47211,6.22046 -4.07656,0.36967 -4.07894,0.37114 -6.80474,4.25701 -3.4865,4.97038 -5.8837,5.99666 -14.00678,5.99666 -5.52172,0 -6.26513,0.16299 -9.18524,2.01498 -3.66619,2.325 -6.06591,2.51084 -12.66384,0.98067 0,0 -4.45969-1.03428 -4.45969-1.03428 0,0 -2.64266,2.64268 -2.64266,2.64268 -1.45349,1.45346 -3.44602,2.84434 -4.42789,3.09078 -0.98184,0.24633 -4.62339-0.06321 -8.09229-0.6876 0,0 -6.30711-1.13562 -6.30711-1.13562 0,0 -1.84309,1.76579 -1.84309,1.76579 -1.7405,1.66751 -2.21922,1.76579 -8.60153,1.76579 0,0 -6.75848,0 -6.75848,0 0,0 -1.79923,2.71879 -1.79923,2.71879 -0.98957,1.49536 -2.87838,3.91331 -4.19734,5.37324 0,0 -2.39808,2.65445 -2.39808,2.65445 0,0 -7.60218,0 -7.60218,0 -8.34823,0 -9.92324,0.38398 -13.60208,3.31642 -1.36576,1.0887 -4.2789,3.0547 -6.47365,4.36893 -4.84415,2.90075 -8.33573,3.10042 -16.85373,0.96409 0,0 -5.68332-1.42546 -5.68332-1.42546 0,0 -2.99727,2.45605 -2.99727,2.45605 -1.64852,1.35082 -4.06602,2.90262 -5.37222,3.44835 -2.17704,0.90961 -2.72497,0.87497 -6.57527-0.4163 -2.31018-0.77477 -5.16246-2.13849 -6.33841-3.03043 -1.17592-0.89198 -2.47343-1.62179 -2.88334-1.62179 -0.40992,0 -2.33271,1.19849 -4.27289,2.66338 -3.96573,2.99412 -7.71299,4.74795 -9.99422,4.67748 -0.84302-0.02551 -3.52848-0.88047 -5.96767-1.89884 0,0 0.00023,0.00006 0.00023,0.00006\"\r\n          style={{fill: ebifrionColors.BODY}} />\r\n        <path\r\n          id=\"ebifrion_leg_top_front\"\r\n          d=\"m 1003.78094,836.42879 c -24.34884-6.8201 -58.46978-25.142 -67.69843-36.35201 0,0 -3.16125-3.83992 -3.16125-3.83992 0,0 0-6.92368 0-6.92368 0-7.56198 0.05584-7.69309 5.72885-13.44402 1.84861-1.87404 2.10376-2.68506 2.78986-8.86708 0.44368-3.99787 1.1937-7.43049 1.81843-8.32238 1.59857-2.28231 6.2801-5.1863 10.19611-6.32469 3.38414-0.98382 3.52463-1.1245 4.90567-4.91207 1.96081-5.37775 3.219-6.34521 8.68564-6.67888 5.00145-0.30526 5.65004-0.659 7.98191-4.35294 0,0 1.62445-2.57323 1.62445-2.57323 0,0 5.79016,0.18113 5.79016,0.18113 0,0 5.79016,0.18113 5.79016,0.18113 0,0 3.77317-4.16653 3.77317-4.16653 2.07524-2.29158 4.14488-4.16653 4.59918-4.16653 0.45431,0 3.10878,0.95822 5.89887,2.12939 0,0 5.07285,2.12941 5.07285,2.12941 0,0 3.25854-1.17176 3.25854-1.17176 3.51422-1.26371 4.67994-1.005 6.99429,1.55234 0.69959,0.77304 1.95917,1.40553 2.79904,1.40553 0.83991,0 1.97983,0.45275 2.53318,1.0061 2.60283,2.60283 12.28,33.26683 14.91701,47.26752 4.69732,24.93924 1.95072,45.58297 -7.09483,53.32564 -5.43396,4.65134 -16.69907,5.85938 -27.20285,2.91725 0,0 0,0.00028 0,0.00028\"\r\n          style={{fill: ebifrionColors.SKIN}} />\r\n        <path\r\n          id=\"ebifrion_leg_top_back\"\r\n          d=\"m 1198.8969,700.24538 c -14.0036,-1.29076 -34.6751,-5.51092 -42.8473,-8.7474 -4.0286,-1.59545 -4.4995,-2.28268 -7.6175,-11.11686 l -2.0608,-5.8386 2.419,-1.9406 c 2.8975,-2.32444 3.0355,-3.78587 0.916,-9.69659 l -1.5034,-4.19221 2.4721,-2.03771 c 2.0175,-1.66294 2.5477,-2.62131 2.8832,-5.21096 0.7087,-5.47038 0.91,-5.89955 3.3036,-7.04098 2.8984,-1.38212 3.5045,-3.85126 2.4171,-9.84736 -0.8585,-4.73457 -0.4895,-5.53411 3.7678,-8.16528 1.6015,-0.98983 2.2425,-1.92192 2.395,-3.48307 0.2424,-2.48187 3.1389,-4.76385 7.5299,-5.93249 3.3717,-0.89734 4.8443,-2.15753 6.5969,-5.64517 2.1929,-4.36377 3.0711,-5.03742 6.5669,-5.03742 2.265,0 3.4815,-0.36624 4.3297,-1.30348 1.5607,-1.72451 7.6554,-2.50002 11.2304,-1.42892 3.2619,0.9773 8.453,6.10809 16.3022,16.11278 8.8642,11.29861 13.4437,18.60619 19.4919,31.10369 6.0278,12.45532 8.9314,21.14317 9.5559,28.59231 0.5588,6.66581 -0.095,9.26121 -3.0243,12.00402 -5.412,5.06752 -13.0817,7.63432 -26.6587,8.92179 -8.1978,0.77737 -9.3239,0.77315 -18.4656,-0.0695 v -3e-5\"\r\n          style={{fill: ebifrionColors.SKIN}} />\r\n\r\n        <clipPath id=\"ebifrion_tail_red_clip\">\r\n          <use href=\"#ebifrion_tail_red\" />\r\n        </clipPath>\r\n        <clipPath id=\"ebifrion_body_clip\">\r\n          <use href=\"#ebifrion_body\" />\r\n        </clipPath>\r\n        <clipPath id=\"ebifrion_leg_top_front_clip\">\r\n          <use href=\"#ebifrion_leg_top_front\" />\r\n        </clipPath>\r\n        <clipPath id=\"ebifrion_leg_top_back_clip\">\r\n          <use href=\"#ebifrion_leg_top_back\" />\r\n        </clipPath>\r\n\r\n      </defs>\r\n      \r\n      <motion.g id=\"ebifrion_tail\"\r\n        animate={tailControls}\r\n        variants={tailVariants}\r\n        onMouseOver={() => tailControls.start('largeFlick').then(tailLoop)}\r\n        style={{originX: '1170px', originY: '430px'}}>\r\n        <use href=\"#ebifrion_tail_red\" />\r\n        <path\r\n          id=\"ebifrion_tail_red_shadow\"\r\n          clipPath=\"url(#ebifrion_tail_red_clip)\"\r\n          d=\"m 1129.6025,256.39746 c 0,0 21.58906,20.84849 33.25635,40.4707 11.66723,19.62221 18.05717,42.76466 18.05717,42.76466 0,0 2.78084-6.33696 11.2661-19.59523 8.4852-13.25823 20.15184-24.92578 20.15184-24.92578 0,0 -82.73146-38.71436 -82.73146-38.71436 m 172.88821,8.48584 c 0,0 12.72796,49.32026 -28.10747,100.23194 -40.8354,50.91168 -81.1406,48.25928 -81.1406,48.25928 0,0 31.81932,44.01856 31.81932,44.01856 0,0 31.82057-11.66751 75.83791-66.29151 44.01743-54.62402 1.59083-126.21827 1.59083-126.21827 0,0 0,0 0,0\"\r\n          style={{fill: ebifrionColors.TAIL_SHADOW}} />\r\n      </motion.g>\r\n\r\n      <motion.path\r\n        id=\"ebifrion_leg_bottom\"\r\n        variants={legVariants}\r\n        animate={['bottom', `${rate}`]}\r\n        transition={{ease: 'easeInOut', duration: rate, loop: Infinity}}\r\n        d=\"m 764.24998,753.37498 c 0,0 -11.77121,58.64808 3.75001,74.25003 14.77519,14.85204 60.00001-0.00003 83.625-16.87501 21.07525-15.05375 -87.375-57.37501 -87.375-57.37501 0,0 0,0 0,0\"\r\n        style={{fill: ebifrionColors.SKIN_SHADOW, originX: '820px', originY: '740px'}} />\r\n      <use href=\"#ebifrion_body\" />\r\n      <path\r\n        id=\"ebifrion_body_shadow\"\r\n        clipPath=\"url(#ebifrion_body_clip)\"\r\n        d=\"m 878.57178,827.99306 c -40.926,-1.69843 -78.09906,-6.79309 -99.60182,-23.73848 -1.68321,-1.38064 -2.90109,-3.28649 -4.23403,-6.62576 -1.21496,-3.04376 -1.24435,-3.17469 -1.10727,-4.93277 61.72352,-85.08508 106.45017,-122.24346 103.48523,-202.40511 16.08745,-103.63756 151.88721,-138.8029 242.01481,-149.46133 2.302,-0.22337 4.1542,-0.50899 4.1477,-0.63947 -0.014,-0.30711 6.4594,-1.04717 9.3553,-1.06929 2.7023,-0.0198 3.4568,0.27383 4.9466,1.93085 1.0739,1.19441 1.9989,3.11692 2.6861,5.58227 0.369,1.32384 0.4716,1.44666 2.1611,2.5867 3.5241,2.37804 4.1483,4.42823 2.7921,9.17056 l -0.4519,1.58031 0.5519,1.6664 c 0.3036,0.9165 0.7808,2.445 1.0605,3.39661 0.4345,1.47847 0.6741,1.87469 1.6468,2.72268 1.8954,1.65254 4.8953,5.11319 5.4055,6.23577 0.3632,0.79903 0.4571,1.41965 0.3854,2.54599 -0.081,1.27925 -0.2608,1.75555 -1.2705,3.37572 -0.6466,1.03742 -1.6451,2.41478 -2.2187,3.06071 -0.5737,0.64593 -1.0431,1.20464 -1.0431,1.2416 0,0.20211 1.4948,4.39821 2.1386,6.00327 1.2093,3.01507 1.0132,4.84129 -0.7704,7.17338 -0.4624,0.60466 -1.1151,1.50358 -1.4503,1.99755 l -0.6095,0.89819 0.6867,1.61447 c 0.8246,1.93884 1.8393,5.47452 2.0661,7.19969 0.114,0.86618 0.034,1.79167 -0.259,3.01003 -0.5075,2.1083 -0.7388,2.60209 -1.2189,2.60209 -0.1995,0 -0.4938,0.11112 -0.6537,0.24718 -0.1599,0.13606 -0.7785,0.6762 -1.3745,1.20061 -0.596,0.52441 -1.2094,0.95502 -1.3632,0.95689 -0.1539,0.002 -0.5701,0.34863 -0.9252,0.7706 -0.5915,0.70311 -0.6313,0.87919 -0.4763,2.10702 0.4754,3.76449 0.3811,5.01953 -0.6527,8.68431 l -0.985,3.49166 -1.5914,1.49462 c -0.8753,0.82205 -1.7917,1.56416 -2.0365,1.64914 -0.3736,0.12983 -0.415,0.29546 -0.2582,1.0338 0.2826,1.33027 0.18,7.61338 -0.1531,9.37879 -0.2831,1.50043 -0.373,1.63896 -2.4879,3.83389 -2.2415,2.32622 -2.9771,3.48523 -3.6238,5.70991 -0.442,1.52059 -0.3901,1.72423 1.4048,5.51449 l 1.3492,2.84876 v 3.08319 3.08316 l -0.9922,0.81054 c -0.5457,0.4458 -1.8731,1.69656 -2.9498,2.77948 -1.0767,1.08292 -3.0512,2.88476 -4.3876,4.00411 l -2.43,2.03519 -4.6737,0.12161 c -3.6889,0.0961 -5.8662,0.30311 -10.3326,0.98317 -9.8936,1.50639 -14.5626,1.92773 -21.4315,1.93399 -11.5303,0.0113 -16.0856,-1.25263 -20.5886,-5.70917 -2.6109,-2.58395 -9.4859,-7.8662 -10.2381,-7.8662 -0.1534,0 -0.9782,0.39104 -1.8328,0.86896 -1.4627,0.81799 -1.6148,0.8536 -2.5942,0.60698 -0.5722,-0.144 -1.7643,-0.5868 -2.6491,-0.98376 -1.3618,-0.61101 -1.6661,-0.86119 -1.9829,-1.6304 -0.8593,-2.08664 -1.1479,-2.51354 -1.9869,-2.93967 -0.8369,-0.42511 -4.6461,-1.70138 -5.0778,-1.70138 -0.1154,0 -0.5334,0.27213 -0.9289,0.60494 -1.411,1.18729 -2.4582,1.39643 -6.7236,1.34289 l -3.9139,-0.049 -0.7418,0.79648 c -0.4079,0.43804 -1.1184,1.24906 -1.5788,1.80224 -0.4605,0.55321 -1.3705,1.28463 -2.0222,1.62541 -1.0621,0.55539 -1.4539,0.61906 -3.7781,0.61407 l -2.593,-0.006 -0.9632,-0.8591 c -0.5298,-0.47251 -1.2698,-1.12864 -1.6446,-1.45811 -0.3747,-0.32944 -0.7916,-0.91562 -0.9265,-1.30252 -0.1766,-0.50624 -0.4028,-0.70353 -0.8067,-0.70353 -0.8283,0 -5.0882,2.04466 -5.3745,2.57964 -0.1355,0.25313 -0.5357,1.58111 -0.8895,2.95129 -0.9161,3.54747 -1.4973,4.36623 -4.7435,6.68254 -1.4914,1.06427 -3.8657,2.6545 -5.27612,3.53384 -2.6879,1.67584 -5.81369,4.25659 -7.70397,6.3606 -1.5226,1.69481 -10.58224,15.37566 -12.54821,18.94893 -2.77209,5.03847 -6.41222,13.74729 -8.81456,21.08835 -2.09948,6.4156 -2.05849,6.08905 -2.10464,16.76991 -0.0227,5.19395 -0.11282,9.73066 -0.20098,10.08159 -0.0941,0.37449 -2.05316,2.5831 -4.74267,5.34654 -2.52043,2.58962 -4.85379,5.06407 -5.18533,5.4987 l -0.60276,0.79027 1.23055,3.02494 c 0.6768,1.66368 1.32962,3.54722 1.45069,4.18561 0.54258,2.86098 -0.62144,13.74735 -1.71975,16.08386 -0.43761,0.93101 -3.189,3.56607 -6.58097,6.30272 l -0.96321,0.77712 v 5.11214 5.11217 l -0.70169,1.26646 c -0.4985,0.89974 -1.26119,1.70161 -2.63387,2.76922 -4.96712,1.2888 -6.39125,2.88816 -6.39845,2.90633 -1.4345,4.47355 -1.67173,4.74939 -6.18316,7.1886 -4.70883,2.54597 -4.73278,2.5651 -4.73919,3.78505 -0.006,1.05077 -0.69191,2.83708 -1.39255,3.62401 -0.2245,0.252 -1.27505,1.0207 -2.33459,1.70796 -2.39839,1.55568 -4.69531,3.45762 -5.58346,4.62328 l -0.67742,0.88909 v 3.87062 c 0,3.53886 -0.0459,3.95643 -0.53507,4.87131 -0.29432,0.55035 -0.81354,1.21966 -1.1539,1.48737 -0.87891,0.69137 -7.50163,3.90195 -11.0397,5.35187 l -1.41089,0.57824 0.11537,2.17219 c 0.13124,2.47266 0.43104,3.31393 3.08942,8.6739 2.23396,4.50414 2.12905,4.3827 3.47573,4.02253 0.59658,-0.15959 2.44471,-0.36295 4.10343,-0.2901 h 3.01876 l 3.17846,1.45928 c 1.74813,0.80263 4.01321,1.94043 5.03345,2.52845 1.02025,0.58799 1.96364,1.06911 2.09642,1.06911 0.13294,0 0.79682,-0.32746 1.47566,-0.72768 2.17494,-1.28242 5.71686,-2.88893 6.8262,-3.09617 1.54565,-0.28877 2.78881,-0.10431 4.75126,0.70495 0.94816,0.39098 1.3443,3.89288 1.52855,3.89288 0.18425,0 0.99074,-0.33106 1.79232,-0.7357 0.80158,-0.40462 2.26295,1.14001 3.40963,0.67776 1.90517,-0.76808 2.28212,-0.83801 4.37519,-0.81173 1.25972,0.017 2.48933,0.0255 2.7324,0.0255 0.24321,-0.002 1.32673,-0.85133 2.40803,-1.88646 1.08133,-1.03513 2.99546,-2.66734 4.25367,-3.6271 1.25819,-0.95975 2.76075,-2.12193 3.33904,-2.58259 1.95814,-1.55993 3.26418,-1.65696 6.93564,-0.51534 4.51125,1.40284 3.77821,1.57609 8.04694,-1.90205 5.34404,-4.35433 6.06872,-4.623 13.32403,-4.93991 l 5.03697,-0.21997 1.3149,-0.78761 c 0.7232,-0.43316 2.0866,-1.63749 3.0299,-2.67633 1.0233,-1.12703 2.2006,-2.14464 2.9191,-2.5232 1.1571,-0.6097 1.3832,-0.6378 5.8062,-0.7215 3.635,-0.0689 5.0267,-0.002 6.6221,0.32029 1.1109,0.22394 2.2907,0.45842 2.6218,0.52081 0.8113,0.15279 2.4245,-1.12433 4.2883,-3.39514 2.5979,-3.16536 4.2091,-3.42828 11.7251,-1.9133 l 1.9264,0.38832 0.8834,-1.05262 c 0.4859,-0.57892 1.4683,-1.75677 2.1832,-2.6174 1.8538,-2.23169 2.873,-2.78277 6.4557,-3.49038 1.6497,-0.32584 3.4393,-0.59496 3.9769,-0.59805 0.5375,-0.003 1.1461,-0.14117 1.3523,-0.30665 0.2064,-0.16554 0.9939,-1.36582 1.7504,-2.66726 2.5727,-4.4261 3.6404,-5.00607 9.3615,-5.08501 l 2.8396,1.5408 3.0689,-1.32908 c 1.2543,-0.54323 1.0086,-3.41921 1.4075,-4.67739 0.3988,-1.25819 0.9338,-3.31588 1.1888,-4.57262 0.5225,-2.57482 1.2199,-3.79831 2.7678,-4.85544 1.2232,-0.83534 2.2431,-1.08624 6.6645,-1.63947 1.9819,-0.24803 3.6357,-0.48699 3.6749,-0.53113 0.039,-0.0442 0.3708,-0.67626 0.7368,-1.40468 1.2309,-2.45001 2.5008,-4.23694 3.5387,-4.97937 1.0216,-0.7308 2.8339,-1.38501 6.0879,-2.19767 l 1.6856,-0.42094 0.8428,-1.68018 c 0.4636,-0.92412 1.2325,-2.27577 1.7087,-3.00368 0.4763,-0.72794 1.1162,-1.75694 1.422,-2.28671 0.8352,-1.44643 2.1609,-2.74107 3.3448,-3.26633 0.5816,-0.25795 2.0445,-0.57898 3.2508,-0.71325 2.7738,-0.30872 3.7726,-0.48373 4.2929,-0.7522 0.6114,-0.31541 1.4932,-1.99145 2.2229,-4.22467 1.1177,-3.42071 2.2725,0.0952 5.2783,-0.97169 2.3423,-0.83151 2.5686,-1.68834 3.4101,-5.44856 0.3416,-1.52643 1.0566,-2.1892 1.2647,-3.09325 0.5207,-2.26219 2.3387,-1.86659 3.9856,-2.70077 0.7191,-0.3642 1.6401,-0.66387 2.0468,-0.66589 0.4067,-0.002 0.8519,-0.0833 0.9892,-0.18057 0.4073,-0.2884 2.6616,-3.50099 3.5034,-4.99258 0.7417,-1.31426 0.7893,-1.55197 0.9675,-4.83857 0.258,-4.75483 0.9134,-6.0821 3.8278,-7.75086 0.596,-0.34123 1.1214,-0.64794 1.1676,-0.68156 0.046,-0.0337 0.386,-1.50429 0.7552,-3.26818 1.5068,-7.19765 2.3754,-8.1347 8.7641,-9.45431 0.998,-0.20608 2.6822,-0.37483 3.7427,-0.37483 2.2063,0 2.0213,0.16639 3.003,-2.70164 0.9247,-2.70198 3.8709,-8.58158 4.7595,-9.49827 0.8423,-0.86913 1.9753,-1.45573 4.8807,-2.527 1.0638,-0.3922 2.8157,-1.12623 3.8931,-1.63108 2.2322,-1.04607 2.0993,-0.78415 2.4892,-4.9051 0.1621,-1.71247 0.3644,-2.57236 0.7536,-3.20219 1.1007,-1.78087 1.7051,-2.10291 7.6273,-4.06349 l 4.1504,-1.37401 0.2642,-0.98133 c 0.1455,-0.53972 0.2056,-1.53232 0.1338,-2.20578 -0.072,-0.67348 -0.2995,-2.68736 -0.5062,-4.47531 -0.4262,-3.68762 -0.3546,-4.86533 0.3841,-6.32186 0.4839,-0.95414 2.3165,-3.27419 3.4826,-4.40898 0.4379,-0.42616 0.5301,-0.87092 0.6482,-3.13044 0.076,-1.44856 0.2971,-3.17551 0.4919,-3.83771 0.1948,-0.66223 0.5946,-2.22749 0.8884,-3.47842 0.7145,-3.0424 1.6116,-4.40691 4.0929,-6.22556 1.5863,-1.16266 3.8739,-2.37504 5.1171,-2.71199 0.4966,-0.13465 0.9055,-0.37602 0.9085,-0.53646 0,-0.16044 0.03,-2.62151 0.06,-5.469 l 0.055,-5.17725 0.7003,-1.38266 c 0.3852,-0.76048 1.3921,-2.15073 2.2376,-3.08945 0.9963,-1.10619 1.4944,-1.8483 1.4156,-2.10898 -0.4393,-1.45327 -0.61,-2.89695 -0.6152,-5.20243 -0.01,-3.2154 0.2767,-3.9174 2.5981,-6.42552 1.5956,-1.72397 1.61,-1.75181 1.5931,-3.08305 -0.011,-0.91945 -0.3156,-2.17928 -0.9632,-3.9922 -0.8652,-2.42206 -0.9456,-2.855 -0.939,-5.05687 0.01,-2.8086 0.3872,-3.7751 2.2647,-5.77925 0.7551,-0.80603 1.3893,-1.84082 1.9186,-3.13044 0.4348,-1.05953 1.3284,-2.93287 1.9856,-4.16296 0.8669,-1.62244 1.15,-2.3828 1.031,-2.76922 -0.09,-0.29299 -0.9034,-1.67097 -1.8069,-3.06215 -2.3567,-3.62852 -2.4178,-3.82119 -2.4706,-7.79939 -0.086,-6.49525 0.3079,-7.97664 2.8611,-10.7538 0.7221,-0.78554 1.3197,-1.56461 1.3278,-1.73132 0.01,-0.16668 0.099,-1.11583 0.2022,-2.10912 0.1029,-0.99332 0.1031,-2.98162 0,-4.41848 l -0.1866,-2.61247 -2.0326,-3.04639 c -1.1179,-1.67553 -2.168,-3.46895 -2.3336,-3.9854 -0.3917,-1.22185 -0.2035,-2.93088 0.7142,-6.49071 0.4023,-1.56033 0.7294,-3.236 0.7269,-3.7237 0,-0.53325 -0.54,-2.1346 -1.3477,-4.01717 -1.907,-4.44455 -2.1658,-5.67006 -1.8311,-8.66889 0.2917,-2.61258 0.8401,-4.44617 2.8811,-9.63213 1.798,-4.56874 1.8013,-5.11126 0.053,-8.7893 -1.2591,-2.64895 -1.3159,-2.8529 -1.308,-4.69565 0.01,-1.47489 0.2559,-2.8859 1.0656,-6.02005 0.9633,-3.72946 1.059,-4.36144 1.0754,-7.10368 0.023,-3.73439 0.1559,-3.98015 2.8814,-5.29724 2.4356,-1.17706 4.5251,-1.67791 7.0191,-1.68248 2.4183,-0.006 4.2526,0.45252 6.7777,1.68846 5.2642,2.57669 8.8438,6.54347 12.4519,13.79866 58.9394,229.76642 -151.5738,406.16547 -365.68334,399.64627 l 6.5e-4,-10e-4 m 74.09633,-141.58502 c 0.0819,-0.13238 0.034,-0.24066 -0.1063,-0.24066 -0.14031,0 -0.25512,0.10828 -0.25512,0.24066 0,0.13238 0.0476,0.24094 0.1063,0.24094 0.0584,0 0.1732,-0.10828 0.25512,-0.24094 v 0\"\r\n        style={{fill: ebifrionColors.BODY_SHADOW}} />\r\n\r\n      <motion.g\r\n        style={{originX: '980px', originY: '740px'}}\r\n        variants={legVariants}\r\n        animate={['topFront', `${rate}`]}>\r\n        <use href=\"#ebifrion_leg_top_front\" />\r\n        <path\r\n          id=\"ebifrion_leg_top_front_shadow\"\r\n          clipPath=\"url(#ebifrion_leg_top_front_clip)\"\r\n          d=\"m 1009.6111,705.13461 c 0,0 18.8544,57.62551 13.3967,95.03544 -4.561,31.26246 -36.96,35.70367 -36.96,35.70367 0,0 51.8157,27.50176 89.3157,-4.74826 37.5,-32.24999 -65.7524,-125.99084 -65.7524,-125.99084 v 0\"\r\n          style={{fill: ebifrionColors.SKIN_SHADOW}} />\r\n      </motion.g>\r\n      \r\n      <motion.g\r\n        style={{originX: '1160px', originY: '640px'}}\r\n        variants={legVariants}\r\n        animate={['topBack', `${rate}`]}>\r\n        <use href=\"#ebifrion_leg_top_back\" />\r\n        <path\r\n          id=\"ebifrion_leg_top_back_shadow\"\r\n          clipPath=\"url(#ebifrion_leg_top_back_clip)\"\r\n          d=\"m 1197.2066,597.52063 c 0,0 26.7467,29.87175 29.6192,77.35068 1.131,18.6954 -24.7779,28.48439 -24.7779,28.48439 0,0 53.6688,17.31288 74.9103,-23.6094 22.3184,-42.99698 -79.7516,-82.22567 -79.7516,-82.22567 v 0\"\r\n          style={{fill: ebifrionColors.SKIN_SHADOW}} />\r\n      </motion.g>\r\n    \r\n    </g>\r\n  );\r\n}","import React from 'react';\r\nimport Upper from './ebifrion/upper';\r\nimport Lower from './ebifrion/lower';\r\n\r\nexport default function Ebifrion({ children }) {\r\n  return (\r\n    <React.Fragment>\r\n      <Lower />\r\n        {children}\r\n      <Upper />\r\n    </React.Fragment>\r\n  )\r\n}","import React, { useContext } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport Matsuri from './matsuri';\r\nimport Ebifrion from './ebifrion';\r\nimport { SceneContext } from '../scene';\r\n\r\nexport default function Character() {\r\n  const [ { showCharacter, rate, swing, bob } ] = useContext(SceneContext);\r\n  // Force the animation to restart without enter/exit transitions when scene properties change\r\n  const rerenderKey = `r${rate}s${swing}b${bob}`;\r\n  const variants = {\r\n    init: {\r\n      translateY: -1080,\r\n    },\r\n    enter: {\r\n      translateY: 0,\r\n      transition: {type: 'spring', stiffness: 70, damping: 10, mass: 2, delay: 1},\r\n    },\r\n    swing: {\r\n      rotate: [-swing, swing, -swing],\r\n      transition: {ease: 'easeInOut', duration: rate, loop: Infinity}\r\n    },\r\n    bob: {\r\n      y: [-bob, bob, -bob],\r\n      originY: [`${160 - bob}px`, `${160 + bob}px`, `${160 - bob}px`],\r\n      transition: {ease: 'easeInOut', duration: rate * 2.67, loop: Infinity},\r\n    },\r\n    exit: {\r\n      translateY: [null, 5 * bob, -1080],\r\n      transition: {ease: 'easeInOut', duration: 1.5},\r\n    },\r\n  };\r\n  return (\r\n    <AnimatePresence>\r\n      {showCharacter && \r\n        <motion.g\r\n          initial=\"init\"\r\n          animate={['enter', 'swing', 'bob', rerenderKey]}\r\n          style={{originX: \"930px\"}}\r\n          variants={variants}\r\n          exit=\"exit\">\r\n          <Ebifrion>\r\n            <Matsuri />\r\n          </Ebifrion>\r\n        </motion.g>}\r\n    </AnimatePresence>\r\n  );\r\n}","import React, { useContext } from 'react';\r\nimport { ColorContext } from '../colorscheme';\r\nimport { SceneContext, BACKDROPS, DRESSINGS, OBJECTS, SPECIALS } from '../scene';\r\nimport { AnimatePresence } from 'framer-motion';\r\n\r\n\r\nexport default function Background() {\r\n  const [ { backgroundColors } ] = useContext(ColorContext);\r\n  const [ { showBackground, backdropIndex, dressingIndex, objectIndex, specialIndex } ] = useContext(SceneContext);\r\n  const shownElements = [\r\n    BACKDROPS[backdropIndex].element,\r\n    DRESSINGS[dressingIndex].element,\r\n    OBJECTS[objectIndex].element,\r\n    SPECIALS[specialIndex].element,\r\n  ];\r\n  return (\r\n    <g>\r\n      <rect width=\"1920\" height=\"1080\" style={{fill: backgroundColors.BACKGROUND}}/>\r\n      <AnimatePresence>\r\n        {showBackground && shownElements}\r\n      </AnimatePresence>\r\n    </g>\r\n  )\r\n}","import React, { useContext } from 'react';\r\nimport { useShortcuts } from '../util';\r\nimport { ColorContext } from '../colorscheme';\r\nimport { SceneContext } from '../scene';\r\n\r\n\r\nexport function LabeledRow({ children }) {\r\n  return (\r\n    <div className=\"columns\">\r\n      <div key=\"label\" className=\"column is-narrow side-menu-column\">\r\n        {children[0]}\r\n      </div>\r\n      {children.slice(1).map((child, i) =>\r\n        <div key={i} className=\"column side-menu-column\">{child}</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function ColorSelector({ group, keys, selection, onSelect }) {\r\n  const [ colors ] = useContext(ColorContext);\r\n  return (\r\n    <div className=\"buttons\">\r\n      {keys.map((key, i) => {\r\n        const isSelected = (selection !== null && selection.group === group && selection.key === key);\r\n        return <button\r\n          key={i}\r\n          className={`button is-rounded is-small swatch${isSelected ? ' is-active' : ''}`}\r\n          style={{backgroundColor: colors[group][key]}}\r\n          onClick={(e) => { e.stopPropagation(); onSelect({group, key}); }} />\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport function ShowButtons() {\r\n  const [ { showCharacter, showBackground }, dispatch ] = useContext(SceneContext);\r\n  const toggleBackground = () => dispatch({type: 'SHOW_BACKGROUND', value: !showBackground});\r\n  const toggleCharacter = () => dispatch({type: 'SHOW_CHARACTER', value: !showCharacter});\r\n  useShortcuts([\r\n    {key: 'KeyZ', fn: toggleBackground},\r\n    {key: 'KeyX', fn: toggleCharacter},\r\n    {key: 'Space', fn: () => { toggleBackground(); toggleCharacter(); }},\r\n    // {key: 'KeyC', fn: () => { dispatch({type: 'SET_BACKDROP', value: 2}); dispatch({type: 'SET_DRESSING', value: 2}); dispatch({type: 'SET_OBJECT', value: 0}); }},\r\n    // {key: 'KeyV', fn: () => { dispatch({type: 'SET_BACKDROP', value: 1}); dispatch({type: 'SET_OBJECT', value: 2}); }},\r\n  ]);\r\n  return (\r\n    <div className=\"buttons has-addons is-centered\">\r\n      <button\r\n        className={`button is-rounded${showBackground ? ' is-dark' : ' is-light'}`}\r\n        onClick={toggleBackground}>\r\n        <i className=\"fas fa-image\" /><strong>&nbsp;(z)</strong>\r\n      </button>\r\n      <button\r\n        className={`button is-rounded${showCharacter ? ' is-dark' : ' is-light'}`}\r\n        onClick={toggleCharacter}>\r\n        <i className=\"fas fa-female\" /><strong>&nbsp;(x)</strong>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport function ScenerySelector({ options, index, colorSelection, onScenerySelect, onColorSelect }) {\r\n  return (\r\n    <LabeledRow>\r\n      <div className=\"buttons has-addons is-centered\">\r\n        {options.map(({ icon }, i) => \r\n          <button\r\n            key={i}\r\n            className={`button is-rounded ${(index === i) ? 'is-dark' : 'is-light'}`}\r\n            onClick={() => onScenerySelect(i)}>\r\n            {icon}\r\n          </button>\r\n        )}\r\n      </div>\r\n      <ColorSelector {...options[index].colors} selection={colorSelection} onSelect={onColorSelect} />\r\n    </LabeledRow>\r\n  );\r\n}\r\n\r\n\r\nexport function Slider({ icon, value, min, max, step, onChange }) {\r\n  return (\r\n    <LabeledRow>\r\n      {icon}\r\n      <input type=\"range\" className=\"slider is-circle is-fullwidth pad-right-1\" {...{ value, min, max, step, onChange }} />\r\n    </LabeledRow>\r\n  );\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { LabeledRow } from './ui';\r\nimport YouTube from 'react-youtube';\r\nimport { SceneContext } from '../scene';\r\n\r\nfunction getYouTubeVideoId(url) {\r\n  try {\r\n    const { host, pathname, search } = new URL(url);\r\n    if (/youtube.com/.test(host)) {\r\n      if (search.length === 0) return null;\r\n      // Remove leading \"?\"\r\n      return search.substring(1).split('&').reduce((acc, q) => {\r\n        const [key, value] = q.split('=');\r\n        if (key === 'v') return value;\r\n        return acc;\r\n      }, null);\r\n    }\r\n    else if (/youtu\\.be/.test(host)) {\r\n      if (pathname.length === 0) return null;\r\n      // Remove leading \"/\"\r\n      return pathname.substring(1);\r\n    }\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default function BGMFooter({ collapsed, children }) {\r\n  const [ { bgmURL }, dispatch ] = useContext(SceneContext);\r\n  const [player, setPlayer] = useState(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const videoId = getYouTubeVideoId(bgmURL);\r\n  function updatePlayer({ target }) { target.setVolume(30); setPlayer(target); }\r\n  function updatePlaying() { setIsPlaying(player !== null && player.getPlayerState() === 1); }\r\n  function togglePlay() {\r\n    if (player === null) return;\r\n    if (isPlaying) player.pauseVideo();\r\n    else player.playVideo();\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"side-menu-footer\">\r\n        <LabeledRow>\r\n          <i className=\"fas fa-music\" />\r\n          <div className=\"field has-addons\">\r\n            <div className=\"control\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"text\"\r\n                placeholder=\"YouTube URL\"\r\n                value={bgmURL}\r\n                onChange={(e) => dispatch({type: 'SET_BGM', value: e.target.value})} />\r\n            </div>\r\n            <div className=\"control\">\r\n              <button\r\n                className={`button is-light${(videoId !== null && player == null) ? ' is-loading' : ''}`}\r\n                onClick={togglePlay}\r\n                disabled={videoId === null || player === null}>\r\n                <i className={`fas fa-${(isPlaying) ? 'pause' : 'play'}`} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </LabeledRow>\r\n        {children}\r\n      </div>\r\n      {(videoId !== null) &&\r\n        <YouTube\r\n          containerClassName={`side-menu-youtube${(collapsed) ? ' side-menu-youtube-hide' : ''}`}\r\n          videoId={videoId}\r\n          opts={{height: '200', width: '352', playerVars: {autoplay: 1, loop: 1, fs: 0, disablekb: 1, modestbranding: 1}}}\r\n          onReady={updatePlayer}\r\n          onStateChange={updatePlaying}\r\n          onEnd={(e) => e.target.playVideo()} />\r\n      }\r\n    </React.Fragment>\r\n  );\r\n}","import React, { useContext, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ColorContext } from './colorscheme';\r\nimport { ChromePicker } from 'react-color';\r\nimport { SceneContext, BACKDROPS, DRESSINGS, OBJECTS, SPECIALS } from './scene';\r\nimport { LabeledRow, ColorSelector, ShowButtons, Slider, ScenerySelector } from './menu/ui';\r\nimport BGMFooter from './menu/bgm';\r\n\r\n\r\nexport default function Menu() {\r\n  const [ scene, sceneDispatch ] = useContext(SceneContext);\r\n  const [ colors, colorDispatch ] = useContext(ColorContext);\r\n  const [ collapsed, setCollapsed ] = useState(true);\r\n  const [ selection, setSelection ] = useState(null);\r\n  const menuWidth = 350;\r\n  const variants = {\r\n    hide: {x: -menuWidth},\r\n    show: {x: 0},\r\n  }\r\n  const handleVariants = {\r\n    hide: {opacity: 0, transition: {ease: 'linear', duration: 0.2, delay: 2}},\r\n    show: {opacity: 1, transition: {ease: 'linear', duration: 0.2}},\r\n  }\r\n  function toggleCollapse() {\r\n    setCollapsed(!collapsed);\r\n    setSelection(null);\r\n  }\r\n  function setGB() {\r\n    colorDispatch({type: 'CHANGE_COLOR', value: {group: 'backgroundColors', key: 'BACKGROUND', color: '#00ff00'}});\r\n    colorDispatch({type: 'CHANGE_COLOR', value: {group: 'objectColors', key: 'PAPER_GB', color: '#00ff00'}});\r\n  }\r\n  return (\r\n    <React.Fragment>\r\n      {!collapsed && <div className=\"side-menu-close-target\" onClick={toggleCollapse} />}\r\n      <motion.div\r\n        initial=\"hide\"\r\n        animate={collapsed ? \"hide\" : \"show\"}\r\n        variants={variants}\r\n        transition={{ease: 'linear', duration: 0.2}}\r\n        style={{width: menuWidth}}\r\n        onClick={() => setSelection(null)}\r\n        className=\"side-menu\">\r\n\r\n        <div className=\"side-menu-content\">\r\n\r\n          <AnimatePresence>\r\n          { (selection !== null) &&\r\n            <motion.div\r\n              initial={{opacity: 0}}\r\n              animate={{opacity: 1}}\r\n              exit={{opacity: 0}}\r\n              transition={{ease: 'easeInOut', duration: 0.2}}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"side-menu-color-picker\">\r\n              <ChromePicker\r\n                disableAlpha\r\n                color={colors[selection.group][selection.key]}\r\n                onChange={(color) => colorDispatch({type: 'CHANGE_COLOR', value: {...selection, color: color.hex}})} />\r\n            </motion.div>}\r\n          </AnimatePresence>\r\n\r\n          <ShowButtons />\r\n\r\n          <LabeledRow>\r\n            <button\r\n              className=\"button is-rounded is-light\"\r\n              onClick={setGB}>\r\n              <strong>GB</strong>\r\n            </button>\r\n            <ColorSelector group=\"backgroundColors\" keys={['BACKGROUND']} selection={selection} onSelect={setSelection} />\r\n          </LabeledRow>\r\n\r\n          <ScenerySelector\r\n            options={BACKDROPS}\r\n            index={scene.backdropIndex}\r\n            colorSelection={selection}\r\n            onScenerySelect={(i) => sceneDispatch({type: 'SET_BACKDROP', value: i})}\r\n            onColorSelect={setSelection} />\r\n\r\n          <ScenerySelector\r\n            options={DRESSINGS}\r\n            index={scene.dressingIndex}\r\n            colorSelection={selection}\r\n            onScenerySelect={(i) => sceneDispatch({type: 'SET_DRESSING', value: i})}\r\n            onColorSelect={setSelection} />\r\n          \r\n          <ScenerySelector\r\n            options={OBJECTS}\r\n            index={scene.objectIndex}\r\n            colorSelection={selection}\r\n            onScenerySelect={(i) => sceneDispatch({type: 'SET_OBJECT', value: i})}\r\n            onColorSelect={setSelection} />\r\n\r\n          <ScenerySelector\r\n            options={SPECIALS}\r\n            index={scene.specialIndex}\r\n            colorSelection={selection}\r\n            onScenerySelect={(i) => sceneDispatch({type: 'SET_SPECIAL', value: i})}\r\n            onColorSelect={setSelection} />\r\n\r\n          <Slider\r\n            icon={<i className=\"fas fa-clock pad-left-1\" />}\r\n            value={scene.rate} min={1} max={6} step={0.1}\r\n            onChange={(e) => sceneDispatch({type: 'SET_RATE', value: parseFloat(e.target.value)})} />\r\n\r\n          <Slider\r\n            icon={<i className=\"fas fa-arrows-alt-h pad-left-1\" />}\r\n            value={scene.swing} min={0} max={9} step={0.1}\r\n            onChange={(e) => sceneDispatch({type: 'SET_SWING', value: parseFloat(e.target.value)})} />\r\n\r\n          <Slider\r\n            icon={<i className=\"fas fa-arrows-alt-v pad-left-1\" style={{margin: '0 4px'}} />}\r\n            value={scene.bob} min={0} max={60} step={1}\r\n            onChange={(e) => sceneDispatch({type: 'SET_BOB', value: parseFloat(e.target.value)})} />\r\n\r\n          <div className=\"buttons has-addons is-centered\">\r\n            <button\r\n              className=\"button is-rounded is-light\"\r\n              onClick={() => colorDispatch({type: 'RESET'})}>\r\n              <i className=\"fas fa-times\" />&nbsp;<i className=\"fas fa-palette\" />\r\n            </button>\r\n            <button\r\n              className=\"button is-rounded is-light\"\r\n              onClick={() => sceneDispatch({type: 'RESET'})}>\r\n              <i className=\"fas fa-times\" />&nbsp;<i className=\"fas fa-arrows-alt\" />\r\n            </button>\r\n          </div>\r\n\r\n          <motion.div\r\n            className=\"side-menu-handle\" onClick={toggleCollapse}\r\n            initial=\"show\"\r\n            animate={collapsed ? \"hide\" : \"show\"}\r\n            whileHover=\"show\"\r\n            variants={handleVariants}>\r\n            <i className={`fas fa-chevron-${collapsed ? 'right' : 'left'}`} style={collapsed ? null : {marginLeft: '-0.5em'}} />\r\n          </motion.div>\r\n\r\n        </div>\r\n        <BGMFooter collapsed={collapsed}>\r\n          <p className=\"has-text-centered\">\r\n            <a href=\"https://github.com/lyger/nemumatsuri\" target=\"_blank\" rel=\"noopener noreferrer\"><i className=\"fab fa-github\" />&nbsp;GitHub</a>\r\n          </p>\r\n        </BGMFooter>\r\n      </motion.div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './Main.scss';\r\nimport Character from './parts/character';\r\nimport Background from './parts/background';\r\nimport Menu from './menu';\r\nimport ColorScheme from './colorscheme';\r\nimport Scene from './scene';\r\n\r\nfunction Main() {\r\n  return (\r\n    <Scene>\r\n      <ColorScheme>\r\n        <svg className=\"main\" viewBox=\"0 0 1920 1080\">\r\n          <Background />\r\n          <Character />\r\n        </svg>\r\n        <Menu />\r\n      </ColorScheme>\r\n    </Scene>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Main />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}